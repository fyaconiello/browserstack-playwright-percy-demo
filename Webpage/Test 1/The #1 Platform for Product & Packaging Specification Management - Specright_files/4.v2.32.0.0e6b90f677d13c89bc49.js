(window.importMarkerV3ChunkJSONP=window.importMarkerV3ChunkJSONP||[]).push([[4],{250:function(e,t,s){!function(t,s){e.exports=s()}(0,()=>{var e,t={},s={exports:t},r=Object.defineProperty,n=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&c(e,s,t[s]);if(i)for(var s of i(t))l.call(t,s)&&c(e,s,t[s]);return e},u=(e,t)=>n(e,o(t)),d=(e,t)=>{var s={};for(var r in e)a.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&i)for(var r of i(e))t.indexOf(r)<0&&l.call(e,r)&&(s[r]=e[r]);return s},p=Object.defineProperty,m=(e,t,s)=>((e,t,s)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});var f=Object.defineProperty,g=(e,t,s)=>((e,t,s)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),y=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(y||{});const w={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},b={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},v={};function S(e){if(v[e])return v[e];const t=globalThis[e],s=t.prototype,r=e in w?w[e]:void 0,n=Boolean(r&&r.every(e=>{var t,r;return Boolean(null==(r=null==(t=Object.getOwnPropertyDescriptor(s,e))?void 0:t.get)?void 0:r.toString().includes("[native code]"))})),o=e in b?b[e]:void 0,i=Boolean(o&&o.every(e=>{var t;return"function"==typeof s[e]&&(null==(t=s[e])?void 0:t.toString().includes("[native code]"))}));if(n&&i&&!globalThis.Zone)return v[e]=t.prototype,t.prototype;try{const r=document.createElement("iframe");document.body.appendChild(r);const n=r.contentWindow;if(!n)return t.prototype;const o=n[e].prototype;return document.body.removeChild(r),o?v[e]=o:s}catch(e){return s}}const C={};function I(e,t,s){var r;const n=`${e}.${String(s)}`;if(C[n])return C[n].call(t);const o=S(e),i=null==(r=Object.getOwnPropertyDescriptor(o,s))?void 0:r.get;return i?(C[n]=i,i.call(t)):t[s]}const x={};function M(e,t,s){const r=`${e}.${String(s)}`;if(x[r])return x[r].bind(t);const n=S(e)[s];return"function"!=typeof n?t[s]:(x[r]=n,n.bind(t))}const k={childNodes:function(e){return I("Node",e,"childNodes")},parentNode:function(e){return I("Node",e,"parentNode")},parentElement:function(e){return I("Node",e,"parentElement")},textContent:function(e){return I("Node",e,"textContent")},contains:function(e,t){return M("Node",e,"contains")(t)},getRootNode:function(e){return M("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?I("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?I("Element",e,"shadowRoot"):null},querySelector:function(e,t){return I("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return I("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return S("MutationObserver").constructor},patch:function(e,t,s){try{if(!(t in e))return()=>{};const r=e[t],n=s(r);return"function"==typeof n&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=n,()=>{e[t]=r}}catch(e){return()=>{}}}};function E(e){return e.nodeType===e.ELEMENT_NODE}function T(e){const t=e&&"host"in e&&"mode"in e&&k.host(e)||null;return Boolean(t&&"shadowRoot"in t&&k.shadowRoot(t)===e)}function N(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function O(e){try{const s=e.rules||e.cssRules;if(!s)return null;let r=e.href;!r&&e.ownerNode&&e.ownerNode.ownerDocument&&(r=e.ownerNode.ownerDocument.location.href);const n=Array.from(s,e=>A(e,r)).join("");return(t=n).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}catch(e){return null}var t}function A(e,t){if(function(e){return"styleSheet"in e}(e)){let t;try{t=O(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const s=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?s.push("layer"):e.layerName&&s.push(`layer(${e.layerName})`),e.supportsText&&s.push(`supports(${e.supportsText})`),e.media.length&&s.push(e.media.mediaText),s.join(" ")+";"}(e)}catch(s){t=e.cssText}return e.styleSheet.href?V(t,e.styleSheet.href):t}{let s=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(s=s.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")),t?V(s,t):s}}class R{constructor(){g(this,"idNodeMap",new Map),g(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const s=null==(t=this.getMeta(e))?void 0:t.id;return null!=s?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const e=this.nodeMetaMap.get(s);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function D(){return new R}function L({element:e,maskInputOptions:t,tagName:s,type:r,value:n,maskInputFn:o}){let i=n||"";const a=r&&P(r);return(t[s.toLowerCase()]||a&&t[a])&&(i=o?o(i,e):"*".repeat(i.length)),i}function P(e){return e.toLowerCase()}function F(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?P(t):null}function _(e,t){var s;let r;try{r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}const n=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!=(s=null==n?void 0:n[1])?s:null}const B=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,U=/^(?:[a-z+]+:)?\/\//i,W=/^www\..*/i,j=/^(data:)([^,]*),(.*)/i;function V(e,t){return(e||"").replace(B,(e,s,r,n,o,i)=>{const a=r||o||i,l=s||n||"";if(!a)return e;if(U.test(a)||W.test(a))return`url(${l}${a}${l})`;if(j.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${l})`;const c=t.split("/"),h=a.split("/");c.pop();for(const e of h)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`})}function z(e,t=!1){return t?e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function G(e,t){return function(e,t,s=!1){const r=Array.from(t.childNodes),n=[];let o=0;if(r.length>1&&e&&"string"==typeof e){let t=z(e,s);const i=t.length/e.length;for(let a=1;a<r.length;a++)if(r[a].textContent&&"string"==typeof r[a].textContent){const l=z(r[a].textContent,s),c=100;let h=3;for(;h<l.length&&(l[h].match(/[a-zA-Z0-9]/)||-1!==l.indexOf(l.substring(0,h),1));h++);for(;h<l.length;h++){let u=l.substring(0,h),d=t.split(u),p=-1;if(2===d.length)p=d[0].length;else if(d.length>2&&""===d[0]&&""!==r[a-1].textContent)p=t.indexOf(u,1);else if(1===d.length){if(u=u.substring(0,u.length-1),d=t.split(u),d.length<=1)return n.push(e),n;h=c+1}else h===l.length-1&&(p=t.indexOf(u));if(d.length>=2&&h>c){const e=r[a-1].textContent;if(e&&"string"==typeof e){const s=z(e).length;p=t.indexOf(u,s)}-1===p&&(p=d[0].length)}if(-1!==p){let a=Math.floor(p/i);for(;a>0&&a<e.length;){if(o+=1,o>50*r.length)return n.push(e),n;const l=z(e.substring(0,a),s);if(l.length===p){n.push(e.substring(0,a)),e=e.substring(a),t=t.substring(p);break}l.length<p?a+=Math.max(1,Math.floor((p-l.length)/i)):a-=Math.max(1,Math.floor((l.length-p)*i))}break}}}}return n.push(e),n}(e,t).join("/* rr_split */")}let Y=1;const H=new RegExp("[^a-z0-9-_:]"),Z=["alt","checked","data","placeholder","src","srcset","href","title","value","text"],X=["checked","data"],J=["alt","placeholder","title","value"];function $(){return Y++}let K,Q;const q=/^[^ \t\n\r\u000c]+/,ee=/^[, \t\n\r\u000c]+/;const te=new WeakMap;function se(e,t){return t&&""!==t.trim()?re(e,t):t}function re(e,t){let s=te.get(e);if(s||(s=e.createElement("a"),te.set(e,s)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return s.setAttribute("href",t),s.href}function ne(e,t,s,r){return r?"src"===s||"href"===s&&("use"!==t||"#"!==r[0])||"xlink:href"===s&&"#"!==r[0]?se(e,r):"background"!==s||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===s?function(e,t){if(""===t.trim())return t;let s=0;function r(e){let r;const n=e.exec(t.substring(s));return n?(r=n[0],s+=r.length,r):""}const n=[];for(;r(ee),!(s>=t.length);){let o=r(q);if(","===o.slice(-1))o=se(e,o.substring(0,o.length-1)),n.push(o);else{let r="";o=se(e,o);let i=!1;for(;;){const e=t.charAt(s);if(""===e){n.push((o+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){s+=1,n.push((o+r).trim());break}"("===e&&(i=!0)}r+=e,s+=1}}}return n.join(", ")}(e,r):"style"===s?V(r,re(e)):"object"===t&&"data"===s?se(e,r):r:se(e,r):r}function oe(e,t,s){return("video"===e||"audio"===e)&&"autoplay"===t}function ie(e={},t=[],s=[]){const r=e;for(const[e,n]of Object.entries(r))if(t.some(t=>e===t||"data"===t&&e.includes(t)))delete r[e];else if(s.some(t=>e===t||"data"===t&&e.includes(t))){const t=String(n).split("").map(e=>"*").join("");r[e]=t}return r}function ae(e){const t=document.createElement("span");return t.setAttribute("style","background-color: #CBD5E1 !important; color: #CBD5E1 !important; padding: 2px; margin: 0; border-radius: 3px;"),t.textContent=e,t}function le(e,t,s){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!s&&le(k.parentNode(e),t,s);for(let s=e.classList.length;s--;){const r=e.classList[s];if(t.test(r))return!0}return!!s&&le(k.parentNode(e),t,s)}function ce(e,t,s,r){let n;if(E(e)){if(n=e,!k.childNodes(n).length)return!1}else{if(null===k.parentElement(e))return!1;n=k.parentElement(e)}try{if("string"==typeof t){if(n.classList.contains("mk-unmask"))return!1;if(r){if(n.closest(".mk-unmask"))return!1;if(n.closest("."+t))return!0}else if(n.classList.contains(t))return!0}else if(le(n,t,r))return!0;if(s)if(r){if(n.closest(s))return!0}else if(n.matches(s))return!0}catch(e){}return!1}function he(e,t){const{doc:s,mirror:r,maskTextClass:n,maskTextSelector:o,blockClass:i,blockSelector:a,needsMask:l,inlineStylesheet:c,maskInputOptions:d={},maskTextFn:p,maskInputFn:m,dataURLOptions:f={},inlineImages:g,recordCanvas:w,keepIframeSrcFn:b,newlyAddedElement:v=!1,cssCaptured:S=!1,isMaskingEnabled:C=!1}=t,I=function(e,t){if(!t.hasNode(e))return;const s=t.getId(e);return 1===s?void 0:s}(s,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:y.Document,childNodes:[],compatMode:e.compatMode}:{type:y.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:y.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:I};case e.ELEMENT_NODE:return function(e,t){const{doc:s,blockClass:r,blockSelector:n,inlineStylesheet:o,maskInputOptions:i={},maskInputFn:a,dataURLOptions:l={},inlineImages:c,recordCanvas:d,keepIframeSrcFn:p,newlyAddedElement:m=!1,rootId:f,maskTextClass:g,maskTextSelector:w,isMaskingEnabled:b}=t,v=b&&function(e,t,s){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const r=e.classList[s];if(t.test(r))return!0}if(s)return e.matches(s)}catch(e){}return!1}(e,r,n),S=b&&ce(e,g,w,!0),C=function(e){if(e instanceof HTMLFormElement)return"form";const t=P(e.tagName);return H.test(t)?"div":t}(e);let I={};const x=e.attributes.length;for(let t=0;t<x;t++){const r=e.attributes[t];oe(C,r.name,r.value)||(I[r.name]=ne(s,C,P(r.name),r.value))}if("link"===C&&o){const t=Array.from(s.styleSheets).find(t=>t.href===e.href);let r=null;t&&(r=O(t)),r&&(delete I.rel,delete I.href,I._cssText=r)}if("style"===C&&e.sheet){let t=O(e.sheet);t&&(e.childNodes.length>1&&(t=G(t,e)),I._cssText=t)}if("input"===C||"textarea"===C||"select"===C){const t=e.value,s=e.checked;"radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&t?I.value=L({element:e,type:F(e),tagName:C,value:t,maskInputOptions:i,maskInputFn:a}):s&&(I.checked=s)}"option"===C&&(e.selected&&!i.select?I.selected=!0:delete I.selected);"dialog"===C&&e.open&&(I.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===C&&d)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let s=0;s<e.width;s+=50)for(let r=0;r<e.height;r+=50){const n=t.getImageData,o="__rrweb_original__"in n?n.__rrweb_original__:n;if(new Uint32Array(o.call(t,s,r,Math.min(50,e.width-s),Math.min(50,e.height-r)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),r=s.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.toDataURL(l.type,l.quality);t!==n&&(I.rr_dataURL=t)}if("img"===C&&c){K||(K=s.createElement("canvas"),Q=K.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",n=t.crossOrigin,o=()=>{t.removeEventListener("load",o);try{K.width=t.naturalWidth,K.height=t.naturalHeight,Q.drawImage(t,0,0),I.rr_dataURL=K.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(n?I.crossOrigin=n:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}if("audio"===C||"video"===C){const t=I;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}m||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(v){I=u(h({},ie(I,Z)),{style:"\n    border-radius: 10px;\n    border: 2px solid #cbd5e1;\n    text-indent: 100%;\n    color: transparent;\n    white-space: nowrap;\n    overflow: hidden;\n    background-image: url(\"data:image/svg+xml,%3Csvg id='patternId' width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='a' patternUnits='userSpaceOnUse' width='70' height='8' patternTransform='scale(2) rotate(45)'%3E%3Crect x='0' y='0' width='100%25' height='100%25' fill='hsla(0,0%25,100%25,1)'/%3E%3Cpath d='M-.02 22c8.373 0 11.938-4.695 16.32-9.662C20.785 7.258 25.728 2 35 2c9.272 0 14.215 5.258 18.7 10.338C58.082 17.305 61.647 22 70.02 22M-.02 14.002C8.353 14 11.918 9.306 16.3 4.339 20.785-.742 25.728-6 35-6 44.272-6 49.215-.742 53.7 4.339c4.382 4.967 7.947 9.661 16.32 9.664M70 6.004c-8.373-.001-11.918-4.698-16.3-9.665C49.215-8.742 44.272-14 35-14c-9.272 0-14.215 5.258-18.7 10.339C11.918 1.306 8.353 6-.02 6.002' stroke-width='2.5' stroke='hsla(213, 27%25, 84%25, 1)' fill='none'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='800%25' height='800%25' transform='translate(0,0)' fill='url(%23a)'/%3E%3C/svg%3E\");\n  ",class:I.class});const{width:t,height:s}=e.getBoundingClientRect();t>0&&(I.rr_width=t+"px"),s>0&&(I.rr_height=s+"px")}S&&(I=ie(I,X,J));"iframe"!==C||p(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);let M;try{customElements.get(C)&&(M=!0)}catch(e){}return{type:y.Element,tagName:C,attributes:I,childNodes:[],isSVG:(k=e,Boolean("svg"===k.tagName||k.ownerSVGElement)||void 0),needBlock:v,rootId:f,isCustom:M};var k}(e,{doc:s,blockClass:i,blockSelector:a,inlineStylesheet:c,maskInputOptions:d,maskInputFn:m,dataURLOptions:f,inlineImages:g,recordCanvas:w,keepIframeSrcFn:b,newlyAddedElement:v,rootId:I,maskTextClass:n,maskTextSelector:o,isMaskingEnabled:C});case e.TEXT_NODE:return function(e,t){const{needsMask:s,maskTextFn:r,rootId:n,cssCaptured:o,isMaskingEnabled:i}=t,a=k.parentNode(e),l=a&&a.tagName;let c="";const h="STYLE"===l||void 0,u="SCRIPT"===l||void 0;u?c="SCRIPT_PLACEHOLDER":o||(c=k.textContent(e),h&&c&&(c=V(c,re(t.doc))));!h&&!u&&c&&s&&i&&(c=r?r(c,k.parentElement(e)):c.replace(/[\S]/g,"*"));return{type:y.Text,textContent:c||"",rootId:n}}(e,{doc:s,needsMask:l,maskTextFn:p,rootId:I,cssCaptured:S,blockClass:i,blockSelector:a,isMaskingEnabled:C});case e.CDATA_SECTION_NODE:return{type:y.CDATA,textContent:"",rootId:I};case e.COMMENT_NODE:return{type:y.Comment,textContent:k.textContent(e)||"",rootId:I};default:return!1}}function ue(e){return null==e?"":e.toLowerCase()}function de(e,t){var s;const{doc:r,mirror:n,blockClass:o,blockSelector:i,maskTextClass:a,maskTextSelector:l,skipChild:c=!1,inlineStylesheet:h=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:p,slimDOMOptions:m,dataURLOptions:f={},inlineImages:g=!1,recordCanvas:w=!1,onSerialize:b,onIframeLoad:v,iframeLoadTimeout:S=5e3,onStylesheetLoad:C,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:x=(()=>!1),newlyAddedElement:M=!1,cssCaptured:O=!1,isMaskingEnabled:A=!1}=t;let{needsMask:R}=t,{preserveWhiteSpace:D=!0}=t;if(e.childNodes){R=ce(e,a,l,void 0===R)}const L=he(e,{doc:r,mirror:n,maskTextClass:a,maskTextSelector:l,blockClass:o,blockSelector:i,needsMask:R||!1,inlineStylesheet:h,maskInputOptions:u,maskTextFn:d,maskInputFn:p,dataURLOptions:f,inlineImages:g,recordCanvas:w,keepIframeSrcFn:x,newlyAddedElement:M,cssCaptured:O,isMaskingEnabled:A});if(!L)return console.warn(e,"not serialized"),null;let P;P=n.hasNode(e)?n.getId(e):function(e,t){if(t.comment&&e.type===y.Comment)return!0;if(e.type===y.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel&&"script"===e.attributes.as||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===_(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(ue(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ue(e.attributes.name)||"icon"===ue(e.attributes.rel)||"apple-touch-icon"===ue(e.attributes.rel)||"shortcut icon"===ue(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&ue(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ue(e.attributes.property).match(/^(og|twitter|fb):/)||ue(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===ue(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===ue(e.attributes.name)||"googlebot"===ue(e.attributes.name)||"bingbot"===ue(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===ue(e.attributes.name)||"generator"===ue(e.attributes.name)||"framework"===ue(e.attributes.name)||"publisher"===ue(e.attributes.name)||"progid"===ue(e.attributes.name)||ue(e.attributes.property).match(/^article:/)||ue(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===ue(e.attributes.name)||"yandex-verification"===ue(e.attributes.name)||"csrf-token"===ue(e.attributes.name)||"p:domain_verify"===ue(e.attributes.name)||"verify-v1"===ue(e.attributes.name)||"verification"===ue(e.attributes.name)||"shopify-checkout-api-token"===ue(e.attributes.name)))return!0}}return!1}(L,m)||!D&&L.type===y.Text&&!L.textContent.replace(/^\s+|\s+$/gm,"").length?-2:$();const F=Object.assign(L,{id:P});if(n.add(e,F),-2===P)return null;b&&b(e);let B=!c;if(F.type===y.Element){B=B&&!F.needBlock,delete F.needBlock;const t=k.shadowRoot(e);t&&N(t)&&(F.isShadowHost=!0)}if((F.type===y.Document||F.type===y.Element)&&B){m.headWhitespace&&F.type===y.Element&&"head"===F.tagName&&(D=!1);const t={doc:r,mirror:n,blockClass:o,blockSelector:i,needsMask:R,maskTextClass:a,maskTextSelector:l,skipChild:c,inlineStylesheet:h,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:m,dataURLOptions:f,inlineImages:g,recordCanvas:w,preserveWhiteSpace:D,onSerialize:b,onIframeLoad:v,iframeLoadTimeout:S,onStylesheetLoad:C,stylesheetLoadTimeout:I,keepIframeSrcFn:x,cssCaptured:!1,isMaskingEnabled:A};if(F.type===y.Element&&"textarea"===F.tagName&&void 0!==F.attributes.value);else{F.type===y.Element&&void 0!==F.attributes._cssText&&"string"==typeof F.attributes._cssText&&(t.cssCaptured=!0);for(let r of Array.from(k.childNodes(e))){A&&ce(r,a,l,!0)&&r.nodeType===y.Text&&(null==(s=r.textContent)?void 0:s.replace(/^\s+|\s+$/gm,"").length)&&(r=ae(r.textContent));const e=de(r,t);e&&F.childNodes.push(e)}}let M=null;if(E(e)&&(M=k.shadowRoot(e)))for(const e of Array.from(k.childNodes(M))){const s=de(e,t);s&&(N(M)&&(s.isShadow=!0),F.childNodes.push(s))}}const U=k.parentNode(e);return U&&T(U)&&N(U)&&(F.isShadow=!0),F.type===y.Element&&"iframe"===F.tagName&&function(e,t,s){const r=e.contentWindow;if(!r)return;let n,o=!1;try{n=r.document.readyState}catch(e){return}if("complete"!==n){const r=setTimeout(()=>{o||(t(),o=!0)},s);return void e.addEventListener("load",()=>{clearTimeout(r),o=!0,t()})}if("about:blank"!==r.location.href||"about:blank"===e.src||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{const t=e.contentDocument;if(t&&v){const s=de(t,{doc:t,mirror:n,blockClass:o,blockSelector:i,needsMask:R,maskTextClass:a,maskTextSelector:l,skipChild:!1,inlineStylesheet:h,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:m,dataURLOptions:f,inlineImages:g,recordCanvas:w,preserveWhiteSpace:D,onSerialize:b,onIframeLoad:v,iframeLoadTimeout:S,onStylesheetLoad:C,stylesheetLoadTimeout:I,keepIframeSrcFn:x,isMaskingEnabled:A});s&&v(e,s)}},S),F.type===y.Element&&"link"===F.tagName&&"string"==typeof F.attributes.rel&&("stylesheet"===F.attributes.rel||"preload"===F.attributes.rel&&"string"==typeof F.attributes.href&&"css"===_(F.attributes.href))&&function(e,t,s){let r,n=!1;try{r=e.sheet}catch(e){return}if(r)return;const o=setTimeout(()=>{n||(t(),n=!0)},s);e.addEventListener("load",()=>{clearTimeout(o),n=!0,t()})}(e,()=>{if(C){const t=de(e,{doc:r,mirror:n,blockClass:o,blockSelector:i,needsMask:R,maskTextClass:a,maskTextSelector:l,skipChild:!1,inlineStylesheet:h,maskInputOptions:u,maskTextFn:d,maskInputFn:p,slimDOMOptions:m,dataURLOptions:f,inlineImages:g,recordCanvas:w,preserveWhiteSpace:D,onSerialize:b,onIframeLoad:v,iframeLoadTimeout:S,onStylesheetLoad:C,stylesheetLoadTimeout:I,keepIframeSrcFn:x,isMaskingEnabled:A});t&&C(e,t)}},I),F}const pe=new RegExp(/(max|min)-device-(width|height)/.source,"g"),me={postcssPlugin:"postcss-custom-selectors",prepare:()=>({postcssPlugin:"postcss-custom-selectors",AtRule:function(e){e.params.match(pe)&&(e.params=e.params.replace(pe,"$1-$2"))}})},fe={postcssPlugin:"postcss-hover-classes",prepare:function(){const e=[];return{Rule:function(t){-1===e.indexOf(t)&&(e.push(t),t.selectors.forEach((function(e){e.includes(":hover")&&(t.selector+=",\n"+e.replace(/:hover/g,".\\:hover"))})))}}}};function ge(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ye(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var s=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),s}var we={exports:{}},be=String,ve=function(){return{isColorSupported:!1,reset:be,bold:be,dim:be,italic:be,underline:be,inverse:be,hidden:be,strikethrough:be,black:be,red:be,green:be,yellow:be,blue:be,magenta:be,cyan:be,white:be,gray:be,bgBlack:be,bgRed:be,bgGreen:be,bgYellow:be,bgBlue:be,bgMagenta:be,bgCyan:be,bgWhite:be}};we.exports=ve(),we.exports.createColors=ve;var Se=we.exports;const Ce=ye(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Ie=Se,xe=Ce,Me=class e extends Error{constructor(t,s,r,n,o,i){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),n&&(this.source=n),i&&(this.plugin=i),void 0!==s&&void 0!==r&&("number"==typeof s?(this.line=s,this.column=r):(this.line=s.line,this.column=s.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=Ie.isColorSupported),xe&&e&&(t=xe(t));let s,r,n=t.split(/\r?\n/),o=Math.max(this.line-3,0),i=Math.min(this.line+2,n.length),a=String(i).length;if(e){let{bold:e,gray:t,red:n}=Ie.createColors(!0);s=t=>e(n(t)),r=e=>t(e)}else s=r=e=>e;return n.slice(o,i).map((e,t)=>{let n=o+1+t,i=" "+(" "+n).slice(-a)+" | ";if(n===this.line){let t=r(i.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return s(">")+r(i)+e+"\n "+t+s("^")}return" "+r(i)+e}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var ke=Me;Me.default=Me;var Ee={};Ee.isClean=Symbol("isClean"),Ee.my=Symbol("my");const Te={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let Ne=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;s="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&"root"!==r.type;)n+=1,r=r.parent;if(s.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<n;e++)s+=t}return s}block(e,t){let s,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),s=this.raw(e,"after")):s=this.raw(e,"after","emptyBody"),s&&this.builder(s),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],void 0!==r))return r;let n=e.parent;if("before"===s){if(!n||"root"===n.type&&n.first===e)return"";if(n&&"document"===n.type)return""}if(!n)return Te[s];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[s])return o.rawCache[s];if("before"===s||"after"===s)return this.beforeAfter(e,s);{let n="raw"+((i=s)[0].toUpperCase()+i.slice(1));this[n]?r=this[n](o,e):o.walk(e=>{if(r=e.raws[t],void 0!==r)return!1})}var i;return void 0===r&&(r=Te[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments(e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1}),void 0===s?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls(e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1}),void 0===s?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1}),t}rawBeforeRule(e){let t;return e.walk(s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&void 0!==s.raws.before)return t=s.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==s.raws.before){let e=s.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1}),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Oe=Ne;Ne.default=Ne;let Ae=Oe;function Re(e,t){new Ae(t).stringify(e)}var De=Re;Re.default=Re;let{isClean:Le,my:Pe}=Ee,Fe=ke,_e=Oe,Be=De;let Ue=class{constructor(e={}){this.raws={},this[Le]=!1,this[Pe]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let s of e[t])"function"==typeof s.clone?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=function e(t,s){let r=new t.constructor;for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;if("proxyCache"===n)continue;let o=t[n],i=typeof o;"parent"===n&&"object"===i?s&&(r[n]=s):"source"===n?r[n]=o:Array.isArray(o)?r[n]=o.map(t=>e(t,r)):("object"===i&&null!==o&&(o=e(o)),r[n]=o)}return r}(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new Fe(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[Le]){this[Le]=!1;let e=this;for(;e=e.parent;)e[Le]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let s=this.source.start;if(e.index)s=this.positionInside(e.index,t);else if(e.word){let r=(t=this.toString()).indexOf(e.word);-1!==r&&(s=this.positionInside(r,t))}return s}positionInside(e,t){let s=t||this.toString(),r=this.source.start.column,n=this.source.start.line;for(let t=0;t<e;t++)"\n"===s[t]?(r=1,n+=1):r+=1;return{column:r,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r=this.toString(),n=r.indexOf(e.word);-1!==n&&(t=this.positionInside(n,r),s=this.positionInside(n+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return(new _e).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let s={},r=null==t;t=t||new Map;let n=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let r=this[e];if(Array.isArray(r))s[e]=r.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof r&&r.toJSON)s[e]=r.toJSON(null,t);else if("source"===e){let o=t.get(r.input);null==o&&(o=n,t.set(r.input,n),n++),s[e]={end:r.end,inputId:o,start:r.start}}else s[e]=r}return r&&(s.inputs=[...t.keys()].map(e=>e.toJSON())),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Be){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,s){let r={node:this};for(let e in s)r[e]=s[e];return e.warn(t,r)}get proxyOf(){return this}};var We=Ue;Ue.default=Ue;let je=We,Ve=class extends je{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e=u(h({},e),{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var ze=Ve;Ve.default=Ve;var Ge={nanoid:(e=21)=>{let t="",s=e;for(;s--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(s=t)=>{let r="",n=s;for(;n--;)r+=e[Math.random()*e.length|0];return r}};let{SourceMapConsumer:Ye,SourceMapGenerator:He}=Ce,{existsSync:Ze,readFileSync:Xe}=Ce,{dirname:Je,join:$e}=Ce;let Ke=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Je(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new Ye(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let s=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+s)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=Je(e),Ze(e))return this.mapFile=e,Xe(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof Ye)return He.fromSourceMap(t).toString();if(t instanceof He)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let s=t(e);if(s){let e=this.loadFile(s);if(!e)throw new Error("Unable to load previous source map: "+s.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=$e(Je(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Qe=Ke;Ke.default=Ke;let{SourceMapConsumer:qe,SourceMapGenerator:et}=Ce,{fileURLToPath:tt,pathToFileURL:st}=Ce,{isAbsolute:rt,resolve:nt}=Ce,{nanoid:ot}=Ge,it=Ce,at=ke,lt=Qe,ct=Symbol("fromOffsetCache"),ht=Boolean(qe&&et),ut=Boolean(nt&&rt),dt=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!ut||/^\w+:\/\//.test(t.from)||rt(t.from)?this.file=t.from:this.file=nt(t.from)),ut&&ht){let e=new lt(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+ot(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,i;if(t&&"object"==typeof t){let e=t,r=s;if("number"==typeof e.offset){let r=this.fromOffset(e.offset);t=r.line,s=r.col}else t=e.line,s=e.column;if("number"==typeof r.offset){let e=this.fromOffset(r.offset);o=e.line,i=e.col}else o=r.line,i=r.column}else if(!s){let e=this.fromOffset(t);t=e.line,s=e.col}let a=this.origin(t,s,o,i);return n=a?new at(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new at(e,void 0===o?t:{column:s,line:t},void 0===o?s:{column:i,line:o},this.css,this.file,r.plugin),n.input={column:s,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(st&&(n.input.url=st(this.file).toString()),n.input.file=this.file),n}fromOffset(e){let t,s;if(this[ct])s=this[ct];else{let e=this.css.split("\n");s=new Array(e.length);let t=0;for(let r=0,n=e.length;r<n;r++)s[r]=t,t+=e[r].length+1;this[ct]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let t,n=s.length-2;for(;r<n;)if(t=r+(n-r>>1),e<s[t])n=t-1;else{if(!(e>=s[t+1])){r=t;break}r=t+1}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:nt(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n,o,i=this.map.consumer(),a=i.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof s&&(n=i.originalPositionFor({column:r,line:s})),o=rt(a.source)?st(a.source):new URL(a.source,this.map.consumer().sourceRoot||st(this.map.mapFile));let l={column:a.column,endColumn:n&&n.column,endLine:n&&n.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!tt)throw new Error("file: protocol is not available in this PostCSS build");l.file=tt(o)}let c=i.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map=h({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var pt=dt;dt.default=dt,it&&it.registerInput&&it.registerInput(dt);let{SourceMapConsumer:mt,SourceMapGenerator:ft}=Ce,{dirname:gt,relative:yt,resolve:wt,sep:bt}=Ce,{pathToFileURL:vt}=Ce,St=pt,Ct=Boolean(mt&&ft),It=Boolean(gt&&wt&&yt&&bt);var xt=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,s=this.toUrl(this.path(e.file)),r=e.root||gt(e.file);!1===this.mapOpts.sourcesContent?(t=new mt(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,s,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),It&&Ct&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=ft.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new ft({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new ft({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,s=1,r=1,n={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(o,i,a)=>{if(this.css+=o,i&&"end"!==a&&(n.generated.line=s,n.generated.column=r-1,i.source&&i.source.start?(n.source=this.sourcePath(i),n.original.line=i.source.start.line,n.original.column=i.source.start.column-1,this.map.addMapping(n)):(n.source="<no source>",n.original.line=1,n.original.column=0,this.map.addMapping(n))),e=o.match(/\n/g),e?(s+=e.length,t=o.lastIndexOf("\n"),r=o.length-t):r+=o.length,i&&"start"!==a){let e=i.parent||{raws:{}};("decl"===i.type||"atrule"===i.type&&!i.nodes)&&i===e.last&&!e.raws.semicolon||(i.source&&i.source.end?(n.source=this.sourcePath(i),n.original.line=i.source.end.line,n.original.column=i.source.end.column-1,n.generated.line=s,n.generated.column=r-2,this.map.addMapping(n)):(n.source="<no source>",n.original.line=1,n.original.column=0,n.generated.line=s,n.generated.column=r-1,this.map.addMapping(n)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?gt(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(s=gt(wt(s,this.mapOpts.annotation)));let r=yt(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new St(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(vt){let t=vt(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===bt&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}};let Mt=We,kt=class extends Mt{constructor(e){super(e),this.type="comment"}};var Et=kt;kt.default=kt;let Tt,Nt,Ot,At,{isClean:Rt,my:Dt}=Ee,Lt=ze,Pt=Et,Ft=We;let _t=class e extends Ft{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,s,r=this.getIterator();for(;this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],s=e(this.proxyOf.nodes[t],t),!1!==s);)this.indexes[r]+=1;return delete this.indexes[r],s}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...s)=>e[t](...s.map(e=>"function"==typeof e?(t,s)=>e(t.toProxy(),s):e)):"every"===t||"some"===t?s=>e[t]((e,...t)=>s(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s,r=this.index(e),n=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let e of n)this.proxyOf.nodes.splice(r+1,0,e);for(let e in this.indexes)s=this.indexes[e],r<s&&(this.indexes[e]=s+n.length);return this.markDirty(),this}insertBefore(e,t){let s,r=this.index(e),n=0===r&&"prepend",o=this.normalize(t,this.proxyOf.nodes[r],n).reverse();r=this.index(e);for(let e of o)this.proxyOf.nodes.splice(r,0,e);for(let e in this.indexes)s=this.indexes[e],r<=s&&(this.indexes[e]=s+o.length);return this.markDirty(),this}normalize(t,s){if("string"==typeof t)t=function e(t){return t.map(t=>(t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t))}(Tt(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Lt(t)]}else if(t.selector)t=[new Nt(t)];else if(t.name)t=[new Ot(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Pt(t)]}return t.map(t=>(t[Dt]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[Rt]&&function e(t){if(t[Rt]=!1,t.proxyOf.nodes)for(let s of t.proxyOf.nodes)e(s)}(t),void 0===t.raws.before&&s&&void 0!==s.raws.before&&(t.raws.before=s.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,s)=>{let r;try{r=e(t,s)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if("atrule"===s.type&&e.test(s.name))return t(s,r)}):this.walk((s,r)=>{if("atrule"===s.type&&s.name===e)return t(s,r)}):(t=e,this.walk((e,s)=>{if("atrule"===e.type)return t(e,s)}))}walkComments(e){return this.walk((t,s)=>{if("comment"===t.type)return e(t,s)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if("decl"===s.type&&e.test(s.prop))return t(s,r)}):this.walk((s,r)=>{if("decl"===s.type&&s.prop===e)return t(s,r)}):(t=e,this.walk((e,s)=>{if("decl"===e.type)return t(e,s)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if("rule"===s.type&&e.test(s.selector))return t(s,r)}):this.walk((s,r)=>{if("rule"===s.type&&s.selector===e)return t(s,r)}):(t=e,this.walk((e,s)=>{if("rule"===e.type)return t(e,s)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};_t.registerParse=e=>{Tt=e},_t.registerRule=e=>{Nt=e},_t.registerAtRule=e=>{Ot=e},_t.registerRoot=e=>{At=e};var Bt=_t;_t.default=_t,_t.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,Ot.prototype):"rule"===e.type?Object.setPrototypeOf(e,Nt.prototype):"decl"===e.type?Object.setPrototypeOf(e,Lt.prototype):"comment"===e.type?Object.setPrototypeOf(e,Pt.prototype):"root"===e.type&&Object.setPrototypeOf(e,At.prototype),e[Dt]=!0,e.nodes&&e.nodes.forEach(e=>{_t.rebuild(e)})};let Ut,Wt,jt=Bt,Vt=class extends jt{constructor(e){super(h({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Ut(new Wt,this,e).stringify()}};Vt.registerLazyResult=e=>{Ut=e},Vt.registerProcessor=e=>{Wt=e};var zt=Vt;Vt.default=Vt;let Gt={};var Yt=function(e){Gt[e]||(Gt[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};let Ht=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Zt=Ht;Ht.default=Ht;let Xt=Zt,Jt=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new Xt(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>"warning"===e.type)}get content(){return this.css}};var $t=Jt;Jt.default=Jt;const Kt="'".charCodeAt(0),Qt='"'.charCodeAt(0),qt="\\".charCodeAt(0),es="/".charCodeAt(0),ts="\n".charCodeAt(0),ss=" ".charCodeAt(0),rs="\f".charCodeAt(0),ns="\t".charCodeAt(0),os="\r".charCodeAt(0),is="[".charCodeAt(0),as="]".charCodeAt(0),ls="(".charCodeAt(0),cs=")".charCodeAt(0),hs="{".charCodeAt(0),us="}".charCodeAt(0),ds=";".charCodeAt(0),ps="*".charCodeAt(0),ms=":".charCodeAt(0),fs="@".charCodeAt(0),gs=/[\t\n\f\r "#'()/;[\\\]{}]/g,ys=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,ws=/.[\r\n"'(/\\]/,bs=/[\da-f]/i;let vs=Bt,Ss=class extends vs{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Cs=Ss;Ss.default=Ss,vs.registerAtRule(Ss);let Is,xs,Ms=Bt,ks=class extends Ms{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t)if("prepend"===s)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of r)e.raws.before=t.raws.before;return r}removeChild(e,t){let s=this.index(e);return!t&&0===s&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new Is(new xs,this,e).stringify()}};ks.registerLazyResult=e=>{Is=e},ks.registerProcessor=e=>{xs=e};var Es=ks;ks.default=ks,Ms.registerRoot(ks);let Ts={comma:e=>Ts.split(e,[","],!0),space:e=>Ts.split(e,[" ","\n","\t"]),split(e,t,s){let r=[],n="",o=!1,i=0,a=!1,l="",c=!1;for(let s of e)c?c=!1:"\\"===s?c=!0:a?s===l&&(a=!1):'"'===s||"'"===s?(a=!0,l=s):"("===s?i+=1:")"===s?i>0&&(i-=1):0===i&&t.includes(s)&&(o=!0),o?(""!==n&&r.push(n.trim()),n="",o=!1):n+=s;return(s||""!==n)&&r.push(n.trim()),r}};var Ns=Ts;Ts.default=Ts;let Os=Bt,As=Ns,Rs=class extends Os{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return As.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}};var Ds=Rs;Rs.default=Rs,Os.registerRule(Rs);let Ls=ze,Ps=function(e,t={}){let s,r,n,o,i,a,l,c,h,u,d=e.css.valueOf(),p=t.ignoreErrors,m=d.length,f=0,g=[],y=[];function w(t){throw e.error("Unclosed "+t,f)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&f>=m},nextToken:function(e){if(y.length)return y.pop();if(f>=m)return;let t=!!e&&e.ignoreUnclosed;switch(s=d.charCodeAt(f),s){case ts:case ss:case ns:case os:case rs:r=f;do{r+=1,s=d.charCodeAt(r)}while(s===ss||s===ts||s===ns||s===os||s===rs);u=["space",d.slice(f,r)],f=r-1;break;case is:case as:case hs:case us:case ms:case ds:case cs:{let e=String.fromCharCode(s);u=[e,e,f];break}case ls:if(c=g.length?g.pop()[1]:"",h=d.charCodeAt(f+1),"url"===c&&h!==Kt&&h!==Qt&&h!==ss&&h!==ts&&h!==ns&&h!==rs&&h!==os){r=f;do{if(a=!1,r=d.indexOf(")",r+1),-1===r){if(p||t){r=f;break}w("bracket")}for(l=r;d.charCodeAt(l-1)===qt;)l-=1,a=!a}while(a);u=["brackets",d.slice(f,r+1),f,r],f=r}else r=d.indexOf(")",f+1),o=d.slice(f,r+1),-1===r||ws.test(o)?u=["(","(",f]:(u=["brackets",o,f,r],f=r);break;case Kt:case Qt:n=s===Kt?"'":'"',r=f;do{if(a=!1,r=d.indexOf(n,r+1),-1===r){if(p||t){r=f+1;break}w("string")}for(l=r;d.charCodeAt(l-1)===qt;)l-=1,a=!a}while(a);u=["string",d.slice(f,r+1),f,r],f=r;break;case fs:gs.lastIndex=f+1,gs.test(d),r=0===gs.lastIndex?d.length-1:gs.lastIndex-2,u=["at-word",d.slice(f,r+1),f,r],f=r;break;case qt:for(r=f,i=!0;d.charCodeAt(r+1)===qt;)r+=1,i=!i;if(s=d.charCodeAt(r+1),i&&s!==es&&s!==ss&&s!==ts&&s!==ns&&s!==os&&s!==rs&&(r+=1,bs.test(d.charAt(r)))){for(;bs.test(d.charAt(r+1));)r+=1;d.charCodeAt(r+1)===ss&&(r+=1)}u=["word",d.slice(f,r+1),f,r],f=r;break;default:s===es&&d.charCodeAt(f+1)===ps?(r=d.indexOf("*/",f+2)+1,0===r&&(p||t?r=d.length:w("comment")),u=["comment",d.slice(f,r+1),f,r],f=r):(ys.lastIndex=f+1,ys.test(d),r=0===ys.lastIndex?d.length-1:ys.lastIndex-2,u=["word",d.slice(f,r+1),f,r],g.push(u),f=r)}return f++,u},position:function(){return f}}},Fs=Et,_s=Cs,Bs=Es,Us=Ds;const Ws={empty:!0,space:!0};let js=Bt,Vs=class{constructor(e){this.input=e,this.root=new Bs,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,s,r,n=new _s;n.name=e[1].slice(1),""===n.name&&this.unnamedAtrule(n,e),this.init(n,e[2]);let o=!1,i=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){n.source.end=this.getPosition(e[2]),n.source.end.offset++,this.semicolon=!0;break}if("{"===t){i=!0;break}if("}"===t){if(a.length>0){for(r=a.length-1,s=a[r];s&&"space"===s[0];)s=a[--r];s&&(n.source.end=this.getPosition(s[3]||s[2]),n.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(n.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(n,"params",a),o&&(e=a[a.length-1],n.source.end=this.getPosition(e[3]||e[2]),n.source.end.offset++,this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),i&&(n.nodes=[],this.current=n)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let s,r=0;for(let n=t-1;n>=0&&(s=e[n],"space"===s[0]||(r+=1,2!==r));n--);throw this.input.error("Missed semicolon","word"===s[0]?s[3]+1:s[2])}colon(e){let t,s,r,n=0;for(let[o,i]of e.entries()){if(t=i,s=t[0],"("===s&&(n+=1),")"===s&&(n-=1),0===n&&":"===s){if(r){if("word"===r[0]&&"progid"===r[1])continue;return o}this.doubleColon(t)}r=t}return!1}comment(e){let t=new Fs;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let e=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=Ps(this.input)}decl(e,t){let s=new Ls;this.init(s,e[0][2]);let r,n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(n[3]||n[2]||function(e){for(let t=e.length-1;t>=0;t--){let s=e[t],r=s[3]||s[2];if(r)return r}}(e)),s.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;s.prop+=e.shift()[1]}for(s.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){s.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),s.raws.between+=r[1]}"_"!==s.prop[0]&&"*"!==s.prop[0]||(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o,i=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)i.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){s.important=!0;let r=this.stringFrom(e,t);r=this.spacesFromEnd(e)+r," !important"!==r&&(s.raws.important=r);break}if("important"===r[1].toLowerCase()){let r=e.slice(0),n="";for(let e=t;e>0;e--){let t=r[e][0];if(0===n.trim().indexOf("!")&&"space"!==t)break;n=r.pop()[1]+n}0===n.trim().indexOf("!")&&(s.important=!0,s.raws.important=n,e=r)}if("space"!==r[0]&&"comment"!==r[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(s.raws.between+=i.map(e=>e[1]).join(""),i=[]),this.raw(s,"value",i.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Us;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],i=e[1].startsWith("--"),a=[],l=e;for(;l;){if(s=l[0],a.push(l),"("===s||"["===s)n||(n=l),o.push("("===s?")":"]");else if(i&&r&&"{"===s)n||(n=l),o.push("}");else if(0===o.length){if(";"===s){if(r)return void this.decl(a,i);break}if("{"===s)return void this.rule(a);if("}"===s){this.tokenizer.back(a.pop()),t=!0;break}":"===s&&(r=!0)}else s===o[o.length-1]&&(o.pop(),0===o.length&&(n=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!i)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,i,a,l=s.length,c="",h=!0;for(let e=0;e<l;e+=1)n=s[e],o=n[0],"space"!==o||e!==l-1||r?"comment"===o?(a=s[e-1]?s[e-1][0]:"empty",i=s[e+1]?s[e+1][0]:"empty",Ws[a]||Ws[i]||","===c.slice(-1)?h=!1:c+=n[1]):c+=n[1]:h=!1;if(!h){let r=s.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:r,value:c}}e[t]=c}rule(e){e.pop();let t=new Us;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},zs=pt;function Gs(e,t){let s=new zs(e,t),r=new Vs(s);try{r.parse()}catch(e){throw"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return r.root}var Ys=Gs;Gs.default=Gs,js.registerParse(Gs);let{isClean:Hs,my:Zs}=Ee,Xs=xt,Js=De,$s=Bt,Ks=zt,Qs=Yt,qs=$t,er=Ys,tr=Es;const sr={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},rr={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},nr={Once:!0,postcssPlugin:!0,prepare:!0};function or(e){return"object"==typeof e&&"function"==typeof e.then}function ir(e){let t=!1,s=sr[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[s,s+"-"+t,0,s+"Exit",s+"Exit-"+t]:t?[s,s+"-"+t,s+"Exit",s+"Exit-"+t]:e.append?[s,0,s+"Exit"]:[s,s+"Exit"]}function ar(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:ir(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function lr(e){return e[Hs]=!1,e.nodes&&e.nodes.forEach(e=>lr(e)),e}let cr={},hr=class e{constructor(t,s,r){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof s||null===s||"root"!==s.type&&"document"!==s.type)if(s instanceof e||s instanceof qs)n=lr(s.root),s.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=s.map);else{let e=er;r.syntax&&(e=r.syntax.parse),r.parser&&(e=r.parser),e.parse&&(e=e.parse);try{n=e(s,r)}catch(e){this.processed=!0,this.error=e}n&&!n[Zs]&&$s.rebuild(n)}else n=lr(s);this.result=new qs(t,n,r),this.helpers=u(h({},cr),{postcss:cr,result:this.result}),this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?h(h({},e),e.prepare(this.result)):e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(s.postcssVersion){let e=s.postcssPlugin,t=s.postcssVersion,r=this.result.processor.version,n=t.split("."),o=r.split(".");(n[0]!==o[0]||parseInt(n[1])>parseInt(o[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+r+", but "+e+" uses "+t+". Perhaps this is the source of the error below.")}}else e.plugin=s.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,s)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,s])};for(let t of this.plugins)if("object"==typeof t)for(let s in t){if(!rr[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!nr[s])if("object"==typeof t[s])for(let r in t[s])e(t,"*"===r?s:s+"-"+r.toLowerCase(),t[s][r]);else"function"==typeof t[s]&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(or(s))try{await s}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Hs];){e[Hs]=!0;let t=[ar(e)];for(;t.length>0;){let e=this.visitTick(t);if(or(e))try{await e}catch(e){let s=t[t.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>s(e,this.helpers));await Promise.all(t)}else await s(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return or(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Js;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let s=new Xs(t,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(or(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Hs];)e[Hs]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"from"in this.opts||Qs("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){let e;this.result.lastPlugin=s;try{e=r(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(or(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if("root"!==s.type&&"document"!==s.type&&!s.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,n]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(s.toProxy(),this.helpers)}catch(e){throw this.handleError(e,s)}}if(0!==t.iterator){let r,n=t.iterator;for(;r=s.nodes[s.indexes[n]];)if(s.indexes[n]+=1,!r[Hs])return r[Hs]=!0,void e.push(ar(r));t.iterator=0,delete s.indexes[n]}let n=t.events;for(;t.eventIndex<n.length;){let e=n[t.eventIndex];if(t.eventIndex+=1,0===e)return void(s.nodes&&s.nodes.length&&(s[Hs]=!0,t.iterator=s.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[Hs]=!0;let t=ir(e);for(let s of t)if(0===s)e.nodes&&e.each(e=>{e[Hs]||this.walkSync(e)});else{let t=this.listeners[s];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};hr.registerPostcss=e=>{cr=e};var ur=hr;hr.default=hr,tr.registerLazyResult(hr),Ks.registerLazyResult(hr);let dr=xt,pr=De,mr=Yt,fr=Ys;const gr=$t;let yr=class{constructor(e,t,s){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let r=pr;this.result=new gr(this._processor,void 0,this._opts),this.result.css=t;let n=this;Object.defineProperty(this.result,"root",{get:()=>n.root});let o=new dr(r,void 0,this._opts,t);if(o.isMap()){let[e,t]=o.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else o.clearAnnotation(),this.result.css=o.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"from"in this._opts||mr("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=fr;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var wr=yr;yr.default=yr;let br=wr,vr=ur,Sr=zt,Cr=Es,Ir=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(!0===s.postcss?s=s():s.postcss&&(s=s.postcss),"object"==typeof s&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if("object"==typeof s&&s.postcssPlugin)t.push(s);else{if("function"!=typeof s)throw"object"==typeof s&&(s.parse||s.stringify)?new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation."):new Error(s+" is not a PostCSS plugin");t.push(s)}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new vr(this,e,t):new br(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var xr=Ir;Ir.default=Ir,Cr.registerProcessor(Ir),Sr.registerProcessor(Ir);let Mr=ze,kr=Qe,Er=Et,Tr=Cs,Nr=pt,Or=Es,Ar=Ds;function Rr(e,t){if(Array.isArray(e))return e.map(e=>Rr(e));let s=e,{inputs:r}=s,n=d(s,["inputs"]);if(r){t=[];for(let e of r){let s=u(h({},e),{__proto__:Nr.prototype});s.map&&(s.map=u(h({},s.map),{__proto__:kr.prototype})),t.push(s)}}if(n.nodes&&(n.nodes=e.nodes.map(e=>Rr(e,t))),n.source){let e=n.source,{inputId:s}=e,r=d(e,["inputId"]);n.source=r,null!=s&&(n.source.input=t[s])}if("root"===n.type)return new Or(n);if("decl"===n.type)return new Mr(n);if("rule"===n.type)return new Ar(n);if("comment"===n.type)return new Er(n);if("atrule"===n.type)return new Tr(n);throw new Error("Unknown node type: "+e.type)}var Dr=Rr;Rr.default=Rr;let Lr=ke,Pr=ze,Fr=ur,_r=Bt,Br=xr,Ur=De,Wr=Dr,jr=zt,Vr=Zt,zr=Et,Gr=Cs,Yr=$t,Hr=pt,Zr=Ys,Xr=Ns,Jr=Ds,$r=Es,Kr=We;function Qr(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Br(e)}Qr.plugin=function(e,t){let s,r=!1;function n(...s){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let n=t(...s);return n.postcssPlugin=e,n.postcssVersion=(new Br).version,n}return Object.defineProperty(n,"postcss",{get:()=>(s||(s=n()),s)}),n.process=function(e,t,s){return Qr([n(s)]).process(e,t)},n},Qr.stringify=Ur,Qr.parse=Zr,Qr.fromJSON=Wr,Qr.list=Xr,Qr.comment=e=>new zr(e),Qr.atRule=e=>new Gr(e),Qr.decl=e=>new Pr(e),Qr.rule=e=>new Jr(e),Qr.root=e=>new $r(e),Qr.document=e=>new jr(e),Qr.CssSyntaxError=Lr,Qr.Declaration=Pr,Qr.Container=_r,Qr.Processor=Br,Qr.Document=jr,Qr.Comment=zr,Qr.Warning=Vr,Qr.AtRule=Gr,Qr.Result=Yr,Qr.Input=Hr,Qr.Rule=Jr,Qr.Root=$r,Qr.Node=Kr,Fr.registerPostcss(Qr);var qr=Qr;Qr.default=Qr;const en=ge(qr);en.stringify,en.fromJSON,en.plugin,en.parse,en.list,en.document,en.comment,en.atRule,en.rule,en.decl,en.root,en.CssSyntaxError,en.Declaration,en.Container,en.Processor,en.Document,en.Comment,en.Warning,en.AtRule,en.Result,en.Input,en.Rule,en.Root,en.Node;const tn={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function sn(e,t){const s=null==t?void 0:t.stylesWithHoverClass.get(e);if(s)return s;let r=e;try{r=en([me,fe]).process(e).css}catch(e){console.warn("Failed to adapt css for replay",e)}return null==t||t.stylesWithHoverClass.set(e,r),r}function rn(){return{stylesWithHoverClass:new Map}}function nn(e,t,s,r){const{doc:n,hackCss:o,cache:i}=r;e.childNodes.length?function(e,t,s,r){const n=[];for(const t of e.childNodes)t.type===y.Text&&n.push(t);const o=t.split("/* rr_split */");for(;o.length>1&&o.length>n.length;)o.splice(-2,2,o.slice(-2).join(""));let i="";s&&(i=sn(o.join(""),r));let a=0;for(let e=0;e<n.length&&e!==o.length;e++){const t=n[e];if(s)if(e<o.length-1){let s=a,r=o[e+1].length;r=Math.min(r,30);let n=!1;for(;r>2;r--){const t=o[e+1].substring(0,r),l=i.substring(a).indexOf(t);if(n=-1!==l,n){s+=l;break}}n||(s+=o[e].length),t.textContent=i.substring(a,s),a=s}else t.textContent=i.substring(a);else t.textContent=o[e]}}(e,s,o,i):(o&&(s=sn(s,i)),t.appendChild(n.createTextNode(s)))}function on(e,t){var s;const{doc:r,hackCss:n,cache:o}=t;switch(e.type){case y.Document:return r.implementation.createDocument(null,"",null);case y.DocumentType:return r.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case y.Element:{const n=function(e){let t=tn[e.tagName]?tn[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(e);let o;e.isSVG?o=r.createElementNS("http://www.w3.org/2000/svg",n):(e.isCustom&&(null==(s=r.defaultView)?void 0:s.customElements)&&!r.defaultView.customElements.get(e.tagName)&&r.defaultView.customElements.define(e.tagName,class extends r.defaultView.HTMLElement{}),o=r.createElement(n));const i={};for(const s in e.attributes){if(!Object.prototype.hasOwnProperty.call(e.attributes,s))continue;let a=e.attributes[s];if(("option"!==n||"selected"!==s||!1!==a)&&null!==a)if(!0===a&&(a=""),s.startsWith("rr_"))i[s]=a;else{if("string"!=typeof a);else{if("style"===n&&"_cssText"===s){nn(e,o,a,t);continue}if("textarea"===n&&"value"===s){o.appendChild(r.createTextNode(a)),e.childNodes=[];continue}}try{if(e.isSVG&&"xlink:href"===s)o.setAttributeNS("http://www.w3.org/1999/xlink",s,a.toString());else if("onload"===s||"onclick"===s||"onmouse"===s.substring(0,7))o.setAttribute("_"+s,a.toString());else{if("meta"===n&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===s){o.setAttribute("csp-content",a.toString());continue}"link"===n&&("preload"===e.attributes.rel&&"script"===e.attributes.as||"modulepreload"===e.attributes.rel)||"link"===n&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===_(e.attributes.href)||("img"===n&&e.attributes.srcset&&e.attributes.rr_dataURL?o.setAttribute("rrweb-original-srcset",e.attributes.srcset):o.setAttribute(s,a.toString()))}}catch(e){}}}for(const t in i){const s=i[t];if("canvas"===n&&"rr_dataURL"===t){const e=r.createElement("img");e.onload=()=>{const t=o.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=s.toString(),o.RRNodeType&&(o.rr_dataURL=s.toString())}else if("img"===n&&"rr_dataURL"===t){const t=o;t.currentSrc.startsWith("data:")||(t.setAttribute("rrweb-original-src",e.attributes.src),t.src=s.toString())}if("rr_width"===t)o.style.setProperty("width",s.toString());else if("rr_height"===t)o.style.setProperty("height",s.toString());else if("rr_mediaCurrentTime"===t&&"number"==typeof s)o.currentTime=s;else if("rr_mediaState"===t)switch(s){case"played":o.play().catch(e=>console.warn("media playback error",e));break;case"paused":o.pause()}else"rr_mediaPlaybackRate"===t&&"number"==typeof s?o.playbackRate=s:"rr_mediaMuted"===t&&"boolean"==typeof s?o.muted=s:"rr_mediaLoop"===t&&"boolean"==typeof s?o.loop=s:"rr_mediaVolume"===t&&"number"==typeof s?o.volume=s:"rr_open_mode"===t&&o.setAttribute("rr_open_mode",s)}if(e.isShadowHost)if(o.shadowRoot)for(;o.shadowRoot.firstChild;)o.shadowRoot.removeChild(o.shadowRoot.firstChild);else o.attachShadow({mode:"open"});return o}case y.Text:return e.isStyle&&n?r.createTextNode(sn(e.textContent,o)):r.createTextNode(e.textContent);case y.CDATA:return r.createCDATASection(e.textContent);case y.Comment:return r.createComment(e.textContent);default:return null}}function an(e,t){const{doc:s,mirror:r,skipChild:n=!1,hackCss:o=!0,afterAppend:i,cache:a}=t;if(r.has(e.id)){const t=r.getNode(e.id),s=r.getMeta(t);if(c=e,(l=s)&&c&&l.type===c.type&&(l.type===y.Document?l.compatMode===c.compatMode:l.type===y.DocumentType?l.name===c.name&&l.publicId===c.publicId&&l.systemId===c.systemId:l.type===y.Comment||l.type===y.Text||l.type===y.CDATA?l.textContent===c.textContent:l.type===y.Element&&l.tagName===c.tagName&&JSON.stringify(l.attributes)===JSON.stringify(c.attributes)&&l.isSVG===c.isSVG&&l.needBlock===c.needBlock))return r.getNode(e.id)}var l,c;let h=on(e,{doc:s,hackCss:o,cache:a});if(!h)return null;if(e.rootId&&r.getNode(e.rootId)!==s&&r.replace(e.rootId,s),e.type===y.Document&&(s.close(),s.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==y.DocumentType&&(e.childNodes[0].type===y.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?s.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):s.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),h=s),r.add(h,e),(e.type===y.Document||e.type===y.Element)&&!n)for(const t of e.childNodes){const n=an(t,{doc:s,mirror:r,skipChild:!1,hackCss:o,afterAppend:i,cache:a});if(n){if(t.isShadow&&E(h)&&h.shadowRoot)h.shadowRoot.appendChild(n);else if(e.type===y.Document&&t.type==y.Element){const e=n;let t=null;e.childNodes.forEach(e=>{"BODY"===e.nodeName&&(t=e)}),t?(e.removeChild(t),h.appendChild(n),e.appendChild(t)):h.appendChild(n)}else h.appendChild(n);i&&i(n,t.id)}else console.warn("Failed to rebuild",t)}return h}function ln(e,t){const{doc:s,onVisit:r,hackCss:n=!0,afterAppend:o,cache:i,mirror:a=new R}=t,l=an(e,{doc:s,mirror:a,skipChild:!1,hackCss:n,afterAppend:o,cache:i});return function(e,t){for(const r of e.getIds())e.has(r)&&(s=e.getNode(r),t(s));var s}(a,e=>{r&&r(e),function(e,t){const s=t.getMeta(e);if((null==s?void 0:s.type)!==y.Element)return;const r=e;for(const e in s.attributes){if(!Object.prototype.hasOwnProperty.call(s.attributes,e)||!e.startsWith("rr_"))continue;const t=s.attributes[e];"rr_scrollLeft"===e&&(r.scrollLeft=t),"rr_scrollTop"===e&&(r.scrollTop=t)}}(e,a)}),l}var cn=Object.defineProperty,hn=(e,t,s)=>((e,t,s)=>t in e?cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),un=Object.defineProperty,dn=(e,t,s)=>((e,t,s)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s);function pn(){return new class{constructor(){dn(this,"idNodeMap",new Map),dn(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const s=null==(t=this.getMeta(e))?void 0:t.id;return null!=s?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const e=this.nodeMetaMap.get(s);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}}function mn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fn(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var s=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),s}var gn={exports:{}},yn=String,wn=function(){return{isColorSupported:!1,reset:yn,bold:yn,dim:yn,italic:yn,underline:yn,inverse:yn,hidden:yn,strikethrough:yn,black:yn,red:yn,green:yn,yellow:yn,blue:yn,magenta:yn,cyan:yn,white:yn,gray:yn,bgBlack:yn,bgRed:yn,bgGreen:yn,bgYellow:yn,bgBlue:yn,bgMagenta:yn,bgCyan:yn,bgWhite:yn}};gn.exports=wn(),gn.exports.createColors=wn;var bn=gn.exports;const vn=fn(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Sn=bn,Cn=vn,In=class e extends Error{constructor(t,s,r,n,o,i){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),n&&(this.source=n),i&&(this.plugin=i),void 0!==s&&void 0!==r&&("number"==typeof s?(this.line=s,this.column=r):(this.line=s.line,this.column=s.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=Sn.isColorSupported),Cn&&e&&(t=Cn(t));let s,r,n=t.split(/\r?\n/),o=Math.max(this.line-3,0),i=Math.min(this.line+2,n.length),a=String(i).length;if(e){let{bold:e,gray:t,red:n}=Sn.createColors(!0);s=t=>e(n(t)),r=e=>t(e)}else s=r=e=>e;return n.slice(o,i).map((e,t)=>{let n=o+1+t,i=" "+(" "+n).slice(-a)+" | ";if(n===this.line){let t=r(i.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return s(">")+r(i)+e+"\n "+t+s("^")}return" "+r(i)+e}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var xn=In;In.default=In;var Mn={};Mn.isClean=Symbol("isClean"),Mn.my=Symbol("my");const kn={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let En=class{constructor(e){this.builder=e}atrule(e,t){let s="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?s+=e.raws.afterName:r&&(s+=" "),e.nodes)this.block(e,s+r);else{let n=(e.raws.between||"")+(t?";":"");this.builder(s+r+n,e)}}beforeAfter(e,t){let s;s="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let r=e.parent,n=0;for(;r&&"root"!==r.type;)n+=1,r=r.parent;if(s.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<n;e++)s+=t}return s}block(e,t){let s,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),s=this.raw(e,"after")):s=this.raw(e,"after","emptyBody"),s&&this.builder(s),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let s=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let n=e.nodes[r],o=this.raw(n,"before");o&&this.builder(o),this.stringify(n,t!==r||s)}}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),r=e.prop+s+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}document(e){this.body(e)}raw(e,t,s){let r;if(s||(s=t),t&&(r=e.raws[t],void 0!==r))return r;let n=e.parent;if("before"===s){if(!n||"root"===n.type&&n.first===e)return"";if(n&&"document"===n.type)return""}if(!n)return kn[s];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[s])return o.rawCache[s];if("before"===s||"after"===s)return this.beforeAfter(e,s);{let n="raw"+((i=s)[0].toUpperCase()+i.slice(1));this[n]?r=this[n](o,e):o.walk(e=>{if(r=e.raws[t],void 0!==r)return!1})}var i;return void 0===r&&(r=kn[s]),o.rawCache[s]=r,r}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let s;return e.walkComments(e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1}),void 0===s?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls(e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1}),void 0===s?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1}),t}rawBeforeRule(e){let t;return e.walk(s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&void 0!==s.raws.before)return t=s.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(s=>{let r=s.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==s.raws.before){let e=s.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1}),t}rawValue(e,t){let s=e[t],r=e.raws[t];return r&&r.value===s?r.raw:s}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Tn=En;En.default=En;let Nn=Tn;function On(e,t){new Nn(t).stringify(e)}var An=On;On.default=On;let{isClean:Rn,my:Dn}=Mn,Ln=xn,Pn=Tn,Fn=An;let _n=class{constructor(e={}){this.raws={},this[Rn]=!1,this[Dn]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let s of e[t])"function"==typeof s.clone?this.append(s.clone()):this.append(s)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=function e(t,s){let r=new t.constructor;for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;if("proxyCache"===n)continue;let o=t[n],i=typeof o;"parent"===n&&"object"===i?s&&(r[n]=s):"source"===n?r[n]=o:Array.isArray(o)?r[n]=o.map(t=>e(t,r)):("object"===i&&null!==o&&(o=e(o)),r[n]=o)}return r}(this);for(let s in e)t[s]=e[s];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:s,start:r}=this.rangeBy(t);return this.source.input.error(e,{column:r.column,line:r.line},{column:s.column,line:s.line},t)}return new Ln(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[Rn]){this[Rn]=!1;let e=this;for(;e=e.parent;)e[Rn]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let s=this.source.start;if(e.index)s=this.positionInside(e.index,t);else if(e.word){let r=(t=this.toString()).indexOf(e.word);-1!==r&&(s=this.positionInside(r,t))}return s}positionInside(e,t){let s=t||this.toString(),r=this.source.start.column,n=this.source.start.line;for(let t=0;t<e;t++)"\n"===s[t]?(r=1,n+=1):r+=1;return{column:r,line:n}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let r=this.toString(),n=r.indexOf(e.word);-1!==n&&(t=this.positionInside(n,r),s=this.positionInside(n+e.word.length,r))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={column:t.column+1,line:t.line}),{end:s,start:t}}raw(e,t){return(new Pn).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let r of e)r===this?s=!0:s?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);s||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let s={},r=null==t;t=t||new Map;let n=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let r=this[e];if(Array.isArray(r))s[e]=r.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof r&&r.toJSON)s[e]=r.toJSON(null,t);else if("source"===e){let o=t.get(r.input);null==o&&(o=n,t.set(r.input,n),n++),s[e]={end:r.end,inputId:o,start:r.start}}else s[e]=r}return r&&(s.inputs=[...t.keys()].map(e=>e.toJSON())),s}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Fn){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,s){let r={node:this};for(let e in s)r[e]=s[e];return e.warn(t,r)}get proxyOf(){return this}};var Bn=_n;_n.default=_n;let Un=Bn,Wn=class extends Un{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e=u(h({},e),{value:String(e.value)})),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var jn=Wn;Wn.default=Wn;var Vn={nanoid:(e=21)=>{let t="",s=e;for(;s--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(s=t)=>{let r="",n=s;for(;n--;)r+=e[Math.random()*e.length|0];return r}};let{SourceMapConsumer:zn,SourceMapGenerator:Gn}=vn,{existsSync:Yn,readFileSync:Hn}=vn,{dirname:Zn,join:Xn}=vn;let Jn=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,r=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Zn(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new zn(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let s=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+s)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),r=e.indexOf("*/",s);s>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,r)))}loadFile(e){if(this.root=Zn(e),Yn(e))return this.mapFile=e,Hn(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof zn)return Gn.fromSourceMap(t).toString();if(t instanceof Gn)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let s=t(e);if(s){let e=this.loadFile(s);if(!e)throw new Error("Unable to load previous source map: "+s.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=Xn(Zn(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var $n=Jn;Jn.default=Jn;let{SourceMapConsumer:Kn,SourceMapGenerator:Qn}=vn,{fileURLToPath:qn,pathToFileURL:eo}=vn,{isAbsolute:to,resolve:so}=vn,{nanoid:ro}=Vn,no=vn,oo=xn,io=$n,ao=Symbol("fromOffsetCache"),lo=Boolean(Kn&&Qn),co=Boolean(so&&to),ho=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!co||/^\w+:\/\//.test(t.from)||to(t.from)?this.file=t.from:this.file=so(t.from)),co&&lo){let e=new io(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+ro(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,s,r={}){let n,o,i;if(t&&"object"==typeof t){let e=t,r=s;if("number"==typeof e.offset){let r=this.fromOffset(e.offset);t=r.line,s=r.col}else t=e.line,s=e.column;if("number"==typeof r.offset){let e=this.fromOffset(r.offset);o=e.line,i=e.col}else o=r.line,i=r.column}else if(!s){let e=this.fromOffset(t);t=e.line,s=e.col}let a=this.origin(t,s,o,i);return n=a?new oo(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,r.plugin):new oo(e,void 0===o?t:{column:s,line:t},void 0===o?s:{column:i,line:o},this.css,this.file,r.plugin),n.input={column:s,endColumn:i,endLine:o,line:t,source:this.css},this.file&&(eo&&(n.input.url=eo(this.file).toString()),n.input.file=this.file),n}fromOffset(e){let t,s;if(this[ao])s=this[ao];else{let e=this.css.split("\n");s=new Array(e.length);let t=0;for(let r=0,n=e.length;r<n;r++)s[r]=t,t+=e[r].length+1;this[ao]=s}t=s[s.length-1];let r=0;if(e>=t)r=s.length-1;else{let t,n=s.length-2;for(;r<n;)if(t=r+(n-r>>1),e<s[t])n=t-1;else{if(!(e>=s[t+1])){r=t;break}r=t+1}}return{col:e-s[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:so(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,s,r){if(!this.map)return!1;let n,o,i=this.map.consumer(),a=i.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof s&&(n=i.originalPositionFor({column:r,line:s})),o=to(a.source)?eo(a.source):new URL(a.source,this.map.consumer().sourceRoot||eo(this.map.mapFile));let l={column:a.column,endColumn:n&&n.column,endLine:n&&n.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!qn)throw new Error("file: protocol is not available in this PostCSS build");l.file=qn(o)}let c=i.sourceContentFor(a.source);return c&&(l.source=c),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map=h({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var uo=ho;ho.default=ho,no&&no.registerInput&&no.registerInput(ho);let{SourceMapConsumer:po,SourceMapGenerator:mo}=vn,{dirname:fo,relative:go,resolve:yo,sep:wo}=vn,{pathToFileURL:bo}=vn,vo=uo,So=Boolean(po&&mo),Co=Boolean(fo&&yo&&go&&wo);var Io=class{constructor(e,t,s,r){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=r,this.originalCSS=r,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,s=this.toUrl(this.path(e.file)),r=e.root||fo(e.file);!1===this.mapOpts.sourcesContent?(t=new po(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,s,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),Co&&So&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=mo.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new mo({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new mo({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,s=1,r=1,n={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(o,i,a)=>{if(this.css+=o,i&&"end"!==a&&(n.generated.line=s,n.generated.column=r-1,i.source&&i.source.start?(n.source=this.sourcePath(i),n.original.line=i.source.start.line,n.original.column=i.source.start.column-1,this.map.addMapping(n)):(n.source="<no source>",n.original.line=1,n.original.column=0,this.map.addMapping(n))),e=o.match(/\n/g),e?(s+=e.length,t=o.lastIndexOf("\n"),r=o.length-t):r+=o.length,i&&"start"!==a){let e=i.parent||{raws:{}};("decl"===i.type||"atrule"===i.type&&!i.nodes)&&i===e.last&&!e.raws.semicolon||(i.source&&i.source.end?(n.source=this.sourcePath(i),n.original.line=i.source.end.line,n.original.column=i.source.end.column-1,n.generated.line=s,n.generated.column=r-2,this.map.addMapping(n)):(n.source="<no source>",n.original.line=1,n.original.column=0,n.generated.line=s,n.generated.column=r-1,this.map.addMapping(n)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let s=this.opts.to?fo(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(s=fo(yo(s,this.mapOpts.annotation)));let r=go(s,e);return this.memoizedPaths.set(e,r),r}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new vo(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let s=t.source.input.from;if(s&&!e[s]){e[s]=!0;let r=this.usesFileUrls?this.toFileUrl(s):this.toUrl(this.path(s));this.map.setSourceContent(r,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(bo){let t=bo(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===wo&&(e=e.replace(/\\/g,"/"));let s=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,s),s}};let xo=Bn,Mo=class extends xo{constructor(e){super(e),this.type="comment"}};var ko=Mo;Mo.default=Mo;let Eo,To,No,Oo,{isClean:Ao,my:Ro}=Mn,Do=jn,Lo=ko,Po=Bn;let Fo=class e extends Po{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,s,r=this.getIterator();for(;this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],s=e(this.proxyOf.nodes[t],t),!1!==s);)this.indexes[r]+=1;return delete this.indexes[r],s}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...s)=>e[t](...s.map(e=>"function"==typeof e?(t,s)=>e(t.toProxy(),s):e)):"every"===t||"some"===t?s=>e[t]((e,...t)=>s(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,s)=>(e[t]===s||(e[t]=s,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let s,r=this.index(e),n=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let e of n)this.proxyOf.nodes.splice(r+1,0,e);for(let e in this.indexes)s=this.indexes[e],r<s&&(this.indexes[e]=s+n.length);return this.markDirty(),this}insertBefore(e,t){let s,r=this.index(e),n=0===r&&"prepend",o=this.normalize(t,this.proxyOf.nodes[r],n).reverse();r=this.index(e);for(let e of o)this.proxyOf.nodes.splice(r,0,e);for(let e in this.indexes)s=this.indexes[e],r<=s&&(this.indexes[e]=s+o.length);return this.markDirty(),this}normalize(t,s){if("string"==typeof t)t=function e(t){return t.map(t=>(t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t))}(Eo(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new Do(t)]}else if(t.selector)t=[new To(t)];else if(t.name)t=[new No(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Lo(t)]}return t.map(t=>(t[Ro]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[Ao]&&function e(t){if(t[Ao]=!1,t.proxyOf.nodes)for(let s of t.proxyOf.nodes)e(s)}(t),void 0===t.raws.before&&s&&void 0!==s.raws.before&&(t.raws.before=s.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls(r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,s))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,s)=>{let r;try{r=e(t,s)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if("atrule"===s.type&&e.test(s.name))return t(s,r)}):this.walk((s,r)=>{if("atrule"===s.type&&s.name===e)return t(s,r)}):(t=e,this.walk((e,s)=>{if("atrule"===e.type)return t(e,s)}))}walkComments(e){return this.walk((t,s)=>{if("comment"===t.type)return e(t,s)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if("decl"===s.type&&e.test(s.prop))return t(s,r)}):this.walk((s,r)=>{if("decl"===s.type&&s.prop===e)return t(s,r)}):(t=e,this.walk((e,s)=>{if("decl"===e.type)return t(e,s)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((s,r)=>{if("rule"===s.type&&e.test(s.selector))return t(s,r)}):this.walk((s,r)=>{if("rule"===s.type&&s.selector===e)return t(s,r)}):(t=e,this.walk((e,s)=>{if("rule"===e.type)return t(e,s)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Fo.registerParse=e=>{Eo=e},Fo.registerRule=e=>{To=e},Fo.registerAtRule=e=>{No=e},Fo.registerRoot=e=>{Oo=e};var _o=Fo;Fo.default=Fo,Fo.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,No.prototype):"rule"===e.type?Object.setPrototypeOf(e,To.prototype):"decl"===e.type?Object.setPrototypeOf(e,Do.prototype):"comment"===e.type?Object.setPrototypeOf(e,Lo.prototype):"root"===e.type&&Object.setPrototypeOf(e,Oo.prototype),e[Ro]=!0,e.nodes&&e.nodes.forEach(e=>{Fo.rebuild(e)})};let Bo,Uo,Wo=_o,jo=class extends Wo{constructor(e){super(h({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Bo(new Uo,this,e).stringify()}};jo.registerLazyResult=e=>{Bo=e},jo.registerProcessor=e=>{Uo=e};var Vo=jo;jo.default=jo;let zo={};var Go=function(e){zo[e]||(zo[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};let Yo=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Ho=Yo;Yo.default=Yo;let Zo=Ho,Xo=class{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new Zo(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>"warning"===e.type)}get content(){return this.css}};var Jo=Xo;Xo.default=Xo;const $o="'".charCodeAt(0),Ko='"'.charCodeAt(0),Qo="\\".charCodeAt(0),qo="/".charCodeAt(0),ei="\n".charCodeAt(0),ti=" ".charCodeAt(0),si="\f".charCodeAt(0),ri="\t".charCodeAt(0),ni="\r".charCodeAt(0),oi="[".charCodeAt(0),ii="]".charCodeAt(0),ai="(".charCodeAt(0),li=")".charCodeAt(0),ci="{".charCodeAt(0),hi="}".charCodeAt(0),ui=";".charCodeAt(0),di="*".charCodeAt(0),pi=":".charCodeAt(0),mi="@".charCodeAt(0),fi=/[\t\n\f\r "#'()/;[\\\]{}]/g,gi=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,yi=/.[\r\n"'(/\\]/,wi=/[\da-f]/i;let bi=_o,vi=class extends bi{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Si=vi;vi.default=vi,bi.registerAtRule(vi);let Ci,Ii,xi=_o,Mi=class extends xi{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,s){let r=super.normalize(e);if(t)if("prepend"===s)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of r)e.raws.before=t.raws.before;return r}removeChild(e,t){let s=this.index(e);return!t&&0===s&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}toResult(e={}){return new Ci(new Ii,this,e).stringify()}};Mi.registerLazyResult=e=>{Ci=e},Mi.registerProcessor=e=>{Ii=e};var ki=Mi;Mi.default=Mi,xi.registerRoot(Mi);let Ei={comma:e=>Ei.split(e,[","],!0),space:e=>Ei.split(e,[" ","\n","\t"]),split(e,t,s){let r=[],n="",o=!1,i=0,a=!1,l="",c=!1;for(let s of e)c?c=!1:"\\"===s?c=!0:a?s===l&&(a=!1):'"'===s||"'"===s?(a=!0,l=s):"("===s?i+=1:")"===s?i>0&&(i-=1):0===i&&t.includes(s)&&(o=!0),o?(""!==n&&r.push(n.trim()),n="",o=!1):n+=s;return(s||""!==n)&&r.push(n.trim()),r}};var Ti=Ei;Ei.default=Ei;let Ni=_o,Oi=Ti,Ai=class extends Ni{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Oi.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}};var Ri=Ai;Ai.default=Ai,Ni.registerRule(Ai);let Di=jn,Li=function(e,t={}){let s,r,n,o,i,a,l,c,h,u,d=e.css.valueOf(),p=t.ignoreErrors,m=d.length,f=0,g=[],y=[];function w(t){throw e.error("Unclosed "+t,f)}return{back:function(e){y.push(e)},endOfFile:function(){return 0===y.length&&f>=m},nextToken:function(e){if(y.length)return y.pop();if(f>=m)return;let t=!!e&&e.ignoreUnclosed;switch(s=d.charCodeAt(f),s){case ei:case ti:case ri:case ni:case si:r=f;do{r+=1,s=d.charCodeAt(r)}while(s===ti||s===ei||s===ri||s===ni||s===si);u=["space",d.slice(f,r)],f=r-1;break;case oi:case ii:case ci:case hi:case pi:case ui:case li:{let e=String.fromCharCode(s);u=[e,e,f];break}case ai:if(c=g.length?g.pop()[1]:"",h=d.charCodeAt(f+1),"url"===c&&h!==$o&&h!==Ko&&h!==ti&&h!==ei&&h!==ri&&h!==si&&h!==ni){r=f;do{if(a=!1,r=d.indexOf(")",r+1),-1===r){if(p||t){r=f;break}w("bracket")}for(l=r;d.charCodeAt(l-1)===Qo;)l-=1,a=!a}while(a);u=["brackets",d.slice(f,r+1),f,r],f=r}else r=d.indexOf(")",f+1),o=d.slice(f,r+1),-1===r||yi.test(o)?u=["(","(",f]:(u=["brackets",o,f,r],f=r);break;case $o:case Ko:n=s===$o?"'":'"',r=f;do{if(a=!1,r=d.indexOf(n,r+1),-1===r){if(p||t){r=f+1;break}w("string")}for(l=r;d.charCodeAt(l-1)===Qo;)l-=1,a=!a}while(a);u=["string",d.slice(f,r+1),f,r],f=r;break;case mi:fi.lastIndex=f+1,fi.test(d),r=0===fi.lastIndex?d.length-1:fi.lastIndex-2,u=["at-word",d.slice(f,r+1),f,r],f=r;break;case Qo:for(r=f,i=!0;d.charCodeAt(r+1)===Qo;)r+=1,i=!i;if(s=d.charCodeAt(r+1),i&&s!==qo&&s!==ti&&s!==ei&&s!==ri&&s!==ni&&s!==si&&(r+=1,wi.test(d.charAt(r)))){for(;wi.test(d.charAt(r+1));)r+=1;d.charCodeAt(r+1)===ti&&(r+=1)}u=["word",d.slice(f,r+1),f,r],f=r;break;default:s===qo&&d.charCodeAt(f+1)===di?(r=d.indexOf("*/",f+2)+1,0===r&&(p||t?r=d.length:w("comment")),u=["comment",d.slice(f,r+1),f,r],f=r):(gi.lastIndex=f+1,gi.test(d),r=0===gi.lastIndex?d.length-1:gi.lastIndex-2,u=["word",d.slice(f,r+1),f,r],g.push(u),f=r)}return f++,u},position:function(){return f}}},Pi=ko,Fi=Si,_i=ki,Bi=Ri;const Ui={empty:!0,space:!0};let Wi=_o,ji=class{constructor(e){this.input=e,this.root=new _i,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,s,r,n=new Fi;n.name=e[1].slice(1),""===n.name&&this.unnamedAtrule(n,e),this.init(n,e[2]);let o=!1,i=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){n.source.end=this.getPosition(e[2]),n.source.end.offset++,this.semicolon=!0;break}if("{"===t){i=!0;break}if("}"===t){if(a.length>0){for(r=a.length-1,s=a[r];s&&"space"===s[0];)s=a[--r];s&&(n.source.end=this.getPosition(s[3]||s[2]),n.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(n.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(n,"params",a),o&&(e=a[a.length-1],n.source.end=this.getPosition(e[3]||e[2]),n.source.end.offset++,this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),i&&(n.nodes=[],this.current=n)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let s,r=0;for(let n=t-1;n>=0&&(s=e[n],"space"===s[0]||(r+=1,2!==r));n--);throw this.input.error("Missed semicolon","word"===s[0]?s[3]+1:s[2])}colon(e){let t,s,r,n=0;for(let[o,i]of e.entries()){if(t=i,s=t[0],"("===s&&(n+=1),")"===s&&(n-=1),0===n&&":"===s){if(r){if("word"===r[0]&&"progid"===r[1])continue;return o}this.doubleColon(t)}r=t}return!1}comment(e){let t=new Pi;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let e=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=Li(this.input)}decl(e,t){let s=new Di;this.init(s,e[0][2]);let r,n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(n[3]||n[2]||function(e){for(let t=e.length-1;t>=0;t--){let s=e[t],r=s[3]||s[2];if(r)return r}}(e)),s.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;s.prop+=e.shift()[1]}for(s.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){s.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),s.raws.between+=r[1]}"_"!==s.prop[0]&&"*"!==s.prop[0]||(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o,i=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)i.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){s.important=!0;let r=this.stringFrom(e,t);r=this.spacesFromEnd(e)+r," !important"!==r&&(s.raws.important=r);break}if("important"===r[1].toLowerCase()){let r=e.slice(0),n="";for(let e=t;e>0;e--){let t=r[e][0];if(0===n.trim().indexOf("!")&&"space"!==t)break;n=r.pop()[1]+n}0===n.trim().indexOf("!")&&(s.important=!0,s.raws.important=n,e=r)}if("space"!==r[0]&&"comment"!==r[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(s.raws.between+=i.map(e=>e[1]).join(""),i=[]),this.raw(s,"value",i.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Bi;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,s=null,r=!1,n=null,o=[],i=e[1].startsWith("--"),a=[],l=e;for(;l;){if(s=l[0],a.push(l),"("===s||"["===s)n||(n=l),o.push("("===s?")":"]");else if(i&&r&&"{"===s)n||(n=l),o.push("}");else if(0===o.length){if(";"===s){if(r)return void this.decl(a,i);break}if("{"===s)return void this.rule(a);if("}"===s){this.tokenizer.back(a.pop()),t=!0;break}":"===s&&(r=!0)}else s===o[o.length-1]&&(o.pop(),0===o.length&&(n=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(n),t&&r){if(!i)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,i)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,r){let n,o,i,a,l=s.length,c="",h=!0;for(let e=0;e<l;e+=1)n=s[e],o=n[0],"space"!==o||e!==l-1||r?"comment"===o?(a=s[e-1]?s[e-1][0]:"empty",i=s[e+1]?s[e+1][0]:"empty",Ui[a]||Ui[i]||","===c.slice(-1)?h=!1:c+=n[1]):c+=n[1]:h=!1;if(!h){let r=s.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:r,value:c}}e[t]=c}rule(e){e.pop();let t=new Bi;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let r=t;r<e.length;r++)s+=e[r][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},Vi=uo;function zi(e,t){let s=new Vi(e,t),r=new ji(s);try{r.parse()}catch(e){throw"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return r.root}var Gi=zi;zi.default=zi,Wi.registerParse(zi);let{isClean:Yi,my:Hi}=Mn,Zi=Io,Xi=An,Ji=_o,$i=Vo,Ki=Go,Qi=Jo,qi=Gi,ea=ki;const ta={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},sa={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},ra={Once:!0,postcssPlugin:!0,prepare:!0};function na(e){return"object"==typeof e&&"function"==typeof e.then}function oa(e){let t=!1,s=ta[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[s,s+"-"+t,0,s+"Exit",s+"Exit-"+t]:t?[s,s+"-"+t,s+"Exit",s+"Exit-"+t]:e.append?[s,0,s+"Exit"]:[s,s+"Exit"]}function ia(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:oa(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function aa(e){return e[Yi]=!1,e.nodes&&e.nodes.forEach(e=>aa(e)),e}let la={},ca=class e{constructor(t,s,r){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof s||null===s||"root"!==s.type&&"document"!==s.type)if(s instanceof e||s instanceof Qi)n=aa(s.root),s.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=s.map);else{let e=qi;r.syntax&&(e=r.syntax.parse),r.parser&&(e=r.parser),e.parse&&(e=e.parse);try{n=e(s,r)}catch(e){this.processed=!0,this.error=e}n&&!n[Hi]&&Ji.rebuild(n)}else n=aa(s);this.result=new Qi(t,n,r),this.helpers=u(h({},la),{postcss:la,result:this.result}),this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?h(h({},e),e.prepare(this.result)):e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(s.postcssVersion){let e=s.postcssPlugin,t=s.postcssVersion,r=this.result.processor.version,n=t.split("."),o=r.split(".");(n[0]!==o[0]||parseInt(n[1])>parseInt(o[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+r+", but "+e+" uses "+t+". Perhaps this is the source of the error below.")}}else e.plugin=s.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,s)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,s])};for(let t of this.plugins)if("object"==typeof t)for(let s in t){if(!sa[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!ra[s])if("object"==typeof t[s])for(let r in t[s])e(t,"*"===r?s:s+"-"+r.toLowerCase(),t[s][r]);else"function"==typeof t[s]&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(na(s))try{await s}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Yi];){e[Yi]=!0;let t=[ia(e)];for(;t.length>0;){let e=this.visitTick(t);if(na(e))try{await e}catch(e){let s=t[t.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>s(e,this.helpers));await Promise.all(t)}else await s(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return na(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Xi;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let s=new Zi(t,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(na(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Yi];)e[Yi]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return"from"in this.opts||Ki("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[s,r]of e){let e;this.result.lastPlugin=s;try{e=r(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(na(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:s,visitors:r}=t;if("root"!==s.type&&"document"!==s.type&&!s.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,n]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(s.toProxy(),this.helpers)}catch(e){throw this.handleError(e,s)}}if(0!==t.iterator){let r,n=t.iterator;for(;r=s.nodes[s.indexes[n]];)if(s.indexes[n]+=1,!r[Yi])return r[Yi]=!0,void e.push(ia(r));t.iterator=0,delete s.indexes[n]}let n=t.events;for(;t.eventIndex<n.length;){let e=n[t.eventIndex];if(t.eventIndex+=1,0===e)return void(s.nodes&&s.nodes.length&&(s[Yi]=!0,t.iterator=s.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[Yi]=!0;let t=oa(e);for(let s of t)if(0===s)e.nodes&&e.each(e=>{e[Yi]||this.walkSync(e)});else{let t=this.listeners[s];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};ca.registerPostcss=e=>{la=e};var ha=ca;ca.default=ca,ea.registerLazyResult(ca),$i.registerLazyResult(ca);let ua=Io,da=An,pa=Go,ma=Gi;const fa=Jo;let ga=class{constructor(e,t,s){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let r=da;this.result=new fa(this._processor,void 0,this._opts),this.result.css=t;let n=this;Object.defineProperty(this.result,"root",{get:()=>n.root});let o=new ua(r,void 0,this._opts,t);if(o.isMap()){let[e,t]=o.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else o.clearAnnotation(),this.result.css=o.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return"from"in this._opts||pa("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=ma;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var ya=ga;ga.default=ga;let wa=ya,ba=ha,va=Vo,Sa=ki,Ca=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let s of e)if(!0===s.postcss?s=s():s.postcss&&(s=s.postcss),"object"==typeof s&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if("object"==typeof s&&s.postcssPlugin)t.push(s);else{if("function"!=typeof s)throw"object"==typeof s&&(s.parse||s.stringify)?new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation."):new Error(s+" is not a PostCSS plugin");t.push(s)}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new ba(this,e,t):new wa(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var Ia=Ca;Ca.default=Ca,Sa.registerProcessor(Ca),va.registerProcessor(Ca);let xa=jn,Ma=$n,ka=ko,Ea=Si,Ta=uo,Na=ki,Oa=Ri;function Aa(e,t){if(Array.isArray(e))return e.map(e=>Aa(e));let s=e,{inputs:r}=s,n=d(s,["inputs"]);if(r){t=[];for(let e of r){let s=u(h({},e),{__proto__:Ta.prototype});s.map&&(s.map=u(h({},s.map),{__proto__:Ma.prototype})),t.push(s)}}if(n.nodes&&(n.nodes=e.nodes.map(e=>Aa(e,t))),n.source){let e=n.source,{inputId:s}=e,r=d(e,["inputId"]);n.source=r,null!=s&&(n.source.input=t[s])}if("root"===n.type)return new Na(n);if("decl"===n.type)return new xa(n);if("rule"===n.type)return new Oa(n);if("comment"===n.type)return new ka(n);if("atrule"===n.type)return new Ea(n);throw new Error("Unknown node type: "+e.type)}var Ra=Aa;Aa.default=Aa;let Da=xn,La=jn,Pa=ha,Fa=_o,_a=Ia,Ba=An,Ua=Ra,Wa=Vo,ja=Ho,Va=ko,za=Si,Ga=Jo,Ya=uo,Ha=Gi,Za=Ti,Xa=Ri,Ja=ki,$a=Bn;function Ka(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new _a(e)}Ka.plugin=function(e,t){let s,r=!1;function n(...s){console&&console.warn&&!r&&(r=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let n=t(...s);return n.postcssPlugin=e,n.postcssVersion=(new _a).version,n}return Object.defineProperty(n,"postcss",{get:()=>(s||(s=n()),s)}),n.process=function(e,t,s){return Ka([n(s)]).process(e,t)},n},Ka.stringify=Ba,Ka.parse=Ha,Ka.fromJSON=Ua,Ka.list=Za,Ka.comment=e=>new Va(e),Ka.atRule=e=>new za(e),Ka.decl=e=>new La(e),Ka.rule=e=>new Xa(e),Ka.root=e=>new Ja(e),Ka.document=e=>new Wa(e),Ka.CssSyntaxError=Da,Ka.Declaration=La,Ka.Container=Fa,Ka.Processor=_a,Ka.Document=Wa,Ka.Comment=Va,Ka.Warning=ja,Ka.AtRule=za,Ka.Result=Ga,Ka.Input=Ya,Ka.Rule=Xa,Ka.Root=Ja,Ka.Node=$a,Pa.registerPostcss(Ka);var Qa=Ka;Ka.default=Ka;const qa=mn(Qa);qa.stringify,qa.fromJSON,qa.plugin,qa.parse,qa.list,qa.document,qa.comment,qa.atRule,qa.rule,qa.decl,qa.root,qa.CssSyntaxError,qa.Declaration,qa.Container,qa.Processor,qa.Document,qa.Comment,qa.Warning,qa.AtRule,qa.Result,qa.Input,qa.Rule,qa.Root,qa.Node;var el=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(el||{});function tl(e){const t=[];for(const s in e){const r=e[s];if("string"!=typeof r)continue;const n=il(s);t.push(`${n}: ${r};`)}return t.join(" ")}const sl=/-([a-z])/g,rl=/^--[a-zA-Z0-9-]+$/,nl=e=>rl.test(e)?e:e.replace(sl,(e,t)=>t?t.toUpperCase():""),ol=/\B([A-Z])/g,il=e=>e.replace(ol,"-$1").toLowerCase();class al{constructor(...e){hn(this,"parentElement",null),hn(this,"parentNode",null),hn(this,"ownerDocument"),hn(this,"firstChild",null),hn(this,"lastChild",null),hn(this,"previousSibling",null),hn(this,"nextSibling",null),hn(this,"ELEMENT_NODE",1),hn(this,"TEXT_NODE",3),hn(this,"nodeType"),hn(this,"nodeName"),hn(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof al))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}class ll extends al{constructor(...e){super(e),hn(this,"nodeType",9),hn(this,"nodeName","#document"),hn(this,"compatMode","CSS1Compat"),hn(this,"RRNodeType",el.Document),hn(this,"textContent",null),this.ownerDocument=this}get documentElement(){return this.childNodes.find(e=>e.RRNodeType===el.Element&&"HTML"===e.tagName)||null}get body(){var e;return(null==(e=this.documentElement)?void 0:e.childNodes.find(e=>e.RRNodeType===el.Element&&"BODY"===e.tagName))||null}get head(){var e;return(null==(e=this.documentElement)?void 0:e.childNodes.find(e=>e.RRNodeType===el.Element&&"HEAD"===e.tagName))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===el.Element||t===el.DocumentType)&&this.childNodes.some(e=>e.RRNodeType===t))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===el.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const s=yl(this,e);return s.parentElement=null,s}insertBefore(e,t){const s=e.RRNodeType;if((s===el.Element||s===el.DocumentType)&&this.childNodes.some(e=>e.RRNodeType===s))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${s===el.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const r=wl(this,e,t);return r.parentElement=null,r}removeChild(e){return bl(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,t,s){return new ll}createDocumentType(e,t,s){const r=new cl(e,t,s);return r.ownerDocument=this,r}createElement(e){const t=new hl(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new pl(e);return t.ownerDocument=this,t}createComment(e){const t=new ml(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new fl(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}class cl extends al{constructor(e,t,s){super(),hn(this,"nodeType",10),hn(this,"RRNodeType",el.DocumentType),hn(this,"name"),hn(this,"publicId"),hn(this,"systemId"),hn(this,"textContent",null),this.name=e,this.publicId=t,this.systemId=s,this.nodeName=e}toString(){return"RRDocumentType"}}class hl extends al{constructor(e){super(),hn(this,"nodeType",1),hn(this,"RRNodeType",el.Element),hn(this,"tagName"),hn(this,"attributes",{}),hn(this,"shadowRoot",null),hn(this,"scrollLeft"),hn(this,"scrollTop"),this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(t=>e+=t.textContent),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new gl(this.attributes.class,e=>{this.attributes.class=e})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?function(e){const t={},s=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const r=e.split(s);r.length>1&&(t[nl(r[0].trim())]=r[1].trim())}})),t}(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(s,r,n)=>{if(t.test(s))return;const o=nl(s);r?e[o]=r:delete e[o],"important"===n&&(e[o]+=" !important"),this.attributes.style=tl(e)},e.removeProperty=s=>{if(t.test(s))return"";const r=nl(s),n=e[r]||"";return delete e[r],this.attributes.style=tl(e),n},e}getAttribute(e){return void 0===this.attributes[e]?null:this.attributes[e]}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,s){this.setAttribute(t,s)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return yl(this,e)}insertBefore(e,t){return wl(this,e,t)}removeChild(e){return bl(this,e)}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}class ul extends hl{constructor(){super(...arguments),hn(this,"currentTime"),hn(this,"volume"),hn(this,"paused"),hn(this,"muted"),hn(this,"playbackRate"),hn(this,"loop")}attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}class dl extends hl{constructor(){super(...arguments),hn(this,"tagName","DIALOG"),hn(this,"nodeName","DIALOG")}get isModal(){return"modal"===this.getAttribute("rr_open_mode")}get open(){return null!==this.getAttribute("open")}close(){this.removeAttribute("open"),this.removeAttribute("rr_open_mode")}show(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","non-modal")}showModal(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","modal")}}class pl extends al{constructor(e){super(),hn(this,"nodeType",3),hn(this,"nodeName","#text"),hn(this,"RRNodeType",el.Text),hn(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return"RRText text="+JSON.stringify(this.data)}}class ml extends al{constructor(e){super(),hn(this,"nodeType",8),hn(this,"nodeName","#comment"),hn(this,"RRNodeType",el.Comment),hn(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return"RRComment text="+JSON.stringify(this.data)}}class fl extends al{constructor(e){super(),hn(this,"nodeName","#cdata-section"),hn(this,"nodeType",4),hn(this,"RRNodeType",el.CDATA),hn(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return"RRCDATASection data="+JSON.stringify(this.data)}}class gl{constructor(e,t){if(hn(this,"onChange"),hn(this,"classes",[]),hn(this,"add",(...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))}),hn(this,"remove",(...e)=>{this.classes=this.classes.filter(t=>-1===e.indexOf(t)),this.onChange&&this.onChange(this.classes.join(" "))}),e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}function yl(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.lastChild?(e.lastChild.nextSibling=t,t.previousSibling=e.lastChild):(e.firstChild=t,t.previousSibling=null),e.lastChild=t,t.nextSibling=null,t.parentNode=e,t.parentElement=e,t.ownerDocument=e.ownerDocument,t}function wl(e,t,s){if(!s)return yl(e,t);if(s.parentNode!==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return t===s||(t.parentNode&&t.parentNode.removeChild(t),t.previousSibling=s.previousSibling,s.previousSibling=t,t.nextSibling=s,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,t.parentElement=e,t.parentNode=e,t.ownerDocument=e.ownerDocument),t}function bl(e,t){if(t.parentNode!==e)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return t.previousSibling?t.previousSibling.nextSibling=t.nextSibling:e.firstChild=t.nextSibling,t.nextSibling?t.nextSibling.previousSibling=t.previousSibling:e.lastChild=t.previousSibling,t.previousSibling=null,t.nextSibling=null,t.parentElement=null,t.parentNode=null,t}var vl=(e=>(e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",e))(vl||{});const Sl={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Cl={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let Il=null;function xl(e,t,s,r=t.mirror||t.ownerDocument.mirror){e=function(e,t,s,r){var n;s.afterAppend&&!Il&&(Il=new WeakSet,setTimeout(()=>{Il=null},0));if(!El(e,t)){const o=kl(t,s.mirror,r);null==(n=e.parentNode)||n.replaceChild(o,e),e=o}switch(t.RRNodeType){case el.Document:if(!Tl(e,t,s.mirror,r)){const n=r.getMeta(t);n&&(s.mirror.removeNodeFromMap(e),e.close(),e.open(),s.mirror.add(e,n),null==Il||Il.add(e))}break;case el.Element:{const n=e,o=t;switch(o.tagName){case"IFRAME":{const n=e.contentDocument;if(!n)break;xl(n,t.contentDocument,s,r);break}}o.shadowRoot&&(n.shadowRoot||n.attachShadow({mode:"open"}),Ml(n.shadowRoot,o.shadowRoot,s,r)),function(e,t,s){const r=e.attributes,n=t.attributes;for(const r in n){const o=n[r],i=s.getMeta(t);if((null==i?void 0:i.isSVG)&&Sl[r])e.setAttributeNS(Sl[r],r,o);else if("CANVAS"===t.tagName&&"rr_dataURL"===r){const t=document.createElement("img");t.src=o,t.onload=()=>{const s=e.getContext("2d");s&&s.drawImage(t,0,0,t.width,t.height)}}else{if("IFRAME"===t.tagName&&"srcdoc"===r)continue;try{e.setAttribute(r,o)}catch(e){console.warn(e)}}}for(const{name:t}of Array.from(r))t in n||e.removeAttribute(t);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}(n,o,r);break}}return e}(e,t,s,r),Ml(e,t,s,r),function(e,t,s){var r;switch(t.RRNodeType){case el.Document:{const e=t.scrollData;e&&s.applyScroll(e,!0);break}case el.Element:{const r=e,n=t;switch(n.scrollData&&s.applyScroll(n.scrollData,!0),n.inputData&&s.applyInput(n.inputData),n.tagName){case"AUDIO":case"VIDEO":{const t=e,s=n;void 0!==s.paused&&(s.paused?t.pause():t.play()),void 0!==s.muted&&(t.muted=s.muted),void 0!==s.volume&&(t.volume=s.volume),void 0!==s.currentTime&&(t.currentTime=s.currentTime),void 0!==s.playbackRate&&(t.playbackRate=s.playbackRate),void 0!==s.loop&&(t.loop=s.loop);break}case"CANVAS":{const n=t;if(null!==n.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=r.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=n.rr_dataURL}n.canvasMutations.forEach(t=>s.applyCanvas(t.event,t.mutation,e));break}case"STYLE":{const e=r.sheet;e&&t.rules.forEach(t=>s.applyStyleSheetMutation(t,e));break}case"DIALOG":{const e=r,t=n,s=e.open,o=e.matches("dialog:modal"),i=t.open,a=t.isModal,l=o!==a,c=s!==i;if((l||s&&c)&&e.close(),i&&(c||l))try{a?e.showModal():e.show()}catch(e){console.warn(e)}break}}break}case el.Text:case el.Comment:case el.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}(null==Il?void 0:Il.has(e))&&(Il.delete(e),null==(r=s.afterAppend)||r.call(s,e,s.mirror.getId(e)))}(e,t,s)}function Ml(e,t,s,r){const n=Array.from(e.childNodes),o=t.childNodes;if(0===n.length&&0===o.length)return;let i=0,a=n.length-1,l=0,c=o.length-1,h=n[i],u=n[a],d=o[l],p=o[c],m=void 0,f=void 0;for(;i<=a&&l<=c;)if(void 0===h)h=n[++i];else if(void 0===u)u=n[--a];else if(Tl(h,d,s.mirror,r))h=n[++i],d=o[++l];else if(Tl(u,p,s.mirror,r))u=n[--a],p=o[--c];else if(Tl(h,p,s.mirror,r)){try{e.insertBefore(h,u.nextSibling)}catch(e){console.warn(e)}h=n[++i],p=o[--c]}else if(Tl(u,d,s.mirror,r)){try{e.insertBefore(u,h)}catch(e){console.warn(e)}u=n[--a],d=o[++l]}else{if(!m){m={};for(let e=i;e<=a;e++){const t=n[e];t&&s.mirror.hasNode(t)&&(m[s.mirror.getId(t)]=e)}}f=m[r.getId(d)];const t=n[f];if(void 0!==f&&t&&Tl(t,d,s.mirror,r)){try{e.insertBefore(t,h)}catch(e){console.warn(e)}n[f]=void 0}else{const t=kl(d,s.mirror,r);"#document"===e.nodeName&&h&&(t.nodeType===t.DOCUMENT_TYPE_NODE&&h.nodeType===h.DOCUMENT_TYPE_NODE||t.nodeType===t.ELEMENT_NODE&&h.nodeType===h.ELEMENT_NODE)&&(e.removeChild(h),s.mirror.removeNodeFromMap(h),h=n[++i]);try{e.insertBefore(t,h||null)}catch(e){console.warn(e)}}d=o[++l]}if(i>a){const t=o[c+1];let n=null;for(t&&(n=s.mirror.getNode(r.getId(t)));l<=c;++l){const t=kl(o[l],s.mirror,r);try{e.insertBefore(t,n)}catch(e){console.warn(e)}}}else if(l>c)for(;i<=a;i++){const t=n[i];if(t&&t.parentNode===e)try{e.removeChild(t),s.mirror.removeNodeFromMap(t)}catch(e){console.warn(e)}}let g=e.firstChild,y=t.firstChild;for(;null!==g&&null!==y;)xl(g,y,s,r),g=g.nextSibling,y=y.nextSibling}function kl(e,t,s){const r=s.getId(e),n=s.getMeta(e);let o=null;if(r>-1&&(o=t.getNode(r)),null!==o&&El(o,e))return o;switch(e.RRNodeType){case el.Document:o=new Document;break;case el.DocumentType:o=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case el.Element:{let t=e.tagName.toLowerCase();t=Cl[t]||t,o=n&&"isSVG"in n&&(null==n?void 0:n.isSVG)?document.createElementNS(Sl.svg,t):document.createElement(e.tagName);break}case el.Text:o=document.createTextNode(e.data);break;case el.Comment:o=document.createComment(e.data);break;case el.CDATA:o=document.createCDATASection(e.data)}n&&t.add(o,h({},n));try{null==Il||Il.add(o)}catch(e){}return o}function El(e,t){return e.nodeType===t.nodeType&&(e.nodeType!==e.ELEMENT_NODE||e.tagName.toUpperCase()===t.tagName)}function Tl(e,t,s,r){const n=s.getId(e),o=r.getId(t);return-1!==n&&n===o&&El(e,t)}class Nl extends ll{constructor(e){super(),hn(this,"UNSERIALIZED_STARTING_ID",-2),hn(this,"_unserializedId",this.UNSERIALIZED_STARTING_ID),hn(this,"mirror",new jl),hn(this,"scrollData",null),e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,s){return new Nl}createDocumentType(e,t,s){const r=new Ol(e,t,s);return r.ownerDocument=this,r}createElement(e){const t=e.toUpperCase();let s;switch(t){case"AUDIO":case"VIDEO":s=new Rl(t);break;case"IFRAME":s=new Fl(t,this.mirror);break;case"CANVAS":s=new Ll(t);break;case"STYLE":s=new Pl(t);break;case"DIALOG":s=new Dl(t);break;default:s=new Al(t)}return s.ownerDocument=this,s}createComment(e){const t=new Bl(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new Ul(e);return t.ownerDocument=this,t}createTextNode(e){const t=new _l(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const Ol=cl;class Al extends hl{constructor(){super(...arguments),hn(this,"inputData",null),hn(this,"scrollData",null)}}class Rl extends ul{}class Dl extends dl{}class Ll extends Al{constructor(){super(...arguments),hn(this,"rr_dataURL",null),hn(this,"canvasMutations",[])}getContext(){return null}}class Pl extends Al{constructor(){super(...arguments),hn(this,"rules",[])}}class Fl extends Al{constructor(e,t){super(e),hn(this,"contentDocument",new Nl),this.contentDocument.mirror=t}}const _l=pl,Bl=ml,Ul=fl;function Wl(e,t,s,r){let n;switch(e.nodeType){case vl.DOCUMENT_NODE:r&&"IFRAME"===r.nodeName?n=r.contentDocument:(n=t,n.compatMode=e.compatMode);break;case vl.DOCUMENT_TYPE_NODE:{const s=e;n=t.createDocumentType(s.name,s.publicId,s.systemId);break}case vl.ELEMENT_NODE:{const s=e,r=(o=s)instanceof HTMLFormElement?"FORM":o.tagName.toUpperCase();n=t.createElement(r);const i=n;for(const{name:e,value:t}of Array.from(s.attributes))i.attributes[e]=t;s.scrollLeft&&(i.scrollLeft=s.scrollLeft),s.scrollTop&&(i.scrollTop=s.scrollTop);break}case vl.TEXT_NODE:n=t.createTextNode(e.textContent||"");break;case vl.CDATA_SECTION_NODE:n=t.createCDATASection(e.data);break;case vl.COMMENT_NODE:n=t.createComment(e.textContent||"");break;case vl.DOCUMENT_FRAGMENT_NODE:n=r.attachShadow({mode:"open"});break;default:return null}var o;let i=s.getMeta(e);return t instanceof Nl&&(i||(i=Vl(n,t.unserializedId),s.add(e,i)),t.mirror.add(n,h({},i))),n}class jl{constructor(){hn(this,"idNodeMap",new Map),hn(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const s=null==(t=this.getMeta(e))?void 0:t.id;return null!=s?s:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const s=t.id;this.idNodeMap.set(s,e),this.nodeMetaMap.set(e,t)}replace(e,t){const s=this.getNode(e);if(s){const e=this.nodeMetaMap.get(s);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Vl(e,t){switch(e.RRNodeType){case el.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case el.DocumentType:{const s=e;return{id:t,type:e.RRNodeType,name:s.name,publicId:s.publicId,systemId:s.systemId}}case el.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case el.Text:case el.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case el.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}const zl={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Gl={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Yl={};function Hl(e){if(Yl[e])return Yl[e];const t=globalThis[e],s=t.prototype,r=e in zl?zl[e]:void 0,n=Boolean(r&&r.every(e=>{var t,r;return Boolean(null==(r=null==(t=Object.getOwnPropertyDescriptor(s,e))?void 0:t.get)?void 0:r.toString().includes("[native code]"))})),o=e in Gl?Gl[e]:void 0,i=Boolean(o&&o.every(e=>{var t;return"function"==typeof s[e]&&(null==(t=s[e])?void 0:t.toString().includes("[native code]"))}));if(n&&i&&!globalThis.Zone)return Yl[e]=t.prototype,t.prototype;try{const r=document.createElement("iframe");document.body.appendChild(r);const n=r.contentWindow;if(!n)return t.prototype;const o=n[e].prototype;return document.body.removeChild(r),o?Yl[e]=o:s}catch(e){return s}}const Zl={};function Xl(e,t,s){var r;const n=`${e}.${String(s)}`;if(Zl[n])return Zl[n].call(t);const o=Hl(e),i=null==(r=Object.getOwnPropertyDescriptor(o,s))?void 0:r.get;return i?(Zl[n]=i,i.call(t)):t[s]}const Jl={};function $l(e,t,s){const r=`${e}.${String(s)}`;if(Jl[r])return Jl[r].bind(t);const n=Hl(e)[s];return"function"!=typeof n?t[s]:(Jl[r]=n,n.bind(t))}function Kl(){return Hl("MutationObserver").constructor}function Ql(e,t,s){try{if(!(t in e))return()=>{};const r=e[t],n=s(r);return"function"==typeof n&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=n,()=>{e[t]=r}}catch(e){return()=>{}}}const ql={childNodes:function(e){return Xl("Node",e,"childNodes")},parentNode:function(e){return Xl("Node",e,"parentNode")},parentElement:function(e){return Xl("Node",e,"parentElement")},textContent:function(e){return Xl("Node",e,"textContent")},contains:function(e,t){return $l("Node",e,"contains")(t)},getRootNode:function(e){return $l("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Xl("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Xl("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Xl("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Xl("Element",e,"querySelectorAll")(t)},mutationObserver:Kl,patch:Ql};function ec(e,t,s=document){const r={capture:!0,passive:!0};return s.addEventListener(e,t,r),()=>s.removeEventListener(e,t,r)}const tc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";function sc(e,t,s={}){let r=null,n=0;return function(...o){const i=Date.now();n||!1!==s.leading||(n=i);const a=t-(i-n),l=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),n=i,e.apply(l,o)):r||!1===s.trailing||(r=setTimeout(()=>{n=!1===s.leading?0:Date.now(),r=null,e.apply(l,o)},a))}}function rc(e,t,s,r,n=window){const o=n.Object.getOwnPropertyDescriptor(e,t);return n.Object.defineProperty(e,t,r?s:{set(e){setTimeout(()=>{s.set.call(this,e)},0),o&&o.set&&o.set.call(this,e)}}),()=>rc(e,t,o||{},!0)}t.mirror={map:{},getId:()=>(console.error(tc),-1),getNode:()=>(console.error(tc),null),removeNodeFromMap(){console.error(tc)},has:()=>(console.error(tc),!1),reset(){console.error(tc)}},"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(t.mirror=new Proxy(t.mirror,{get:(e,t,s)=>("map"===t&&console.error(tc),Reflect.get(e,t,s))}));let nc=Date.now;function oc(e){var t,s,r,n;const o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=ql.parentElement(o.body))?void 0:t.scrollLeft)||(null==(s=null==o?void 0:o.body)?void 0:s.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(r=ql.parentElement(o.body))?void 0:r.scrollTop)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollTop)||0}}function ic(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ac(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function lc(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:ql.parentElement(e)}function cc(e,t,s,r){if(!e)return!1;const n=lc(e);if(!n)return!1;try{if("string"==typeof t){if(n.classList.contains(t))return!0;if(r&&null!==n.closest("."+t))return!0}else if(le(n,t,r))return!0}catch(e){}if(s){if(n.matches(s))return!0;if(r&&null!==n.closest(s))return!0}return!1}function hc(e,t){return-1!==t.getId(e)}function uc(e,t,s){return!("TITLE"!==e.tagName||!s.headTitleMutations)||-2===t.getId(e)}function dc(e,t){if(T(e))return!1;const s=t.getId(e);if(!t.has(s))return!0;const r=ql.parentNode(e);return(!r||r.nodeType!==e.DOCUMENT_NODE)&&(!r||dc(r,t))}function pc(e){return Boolean(e.changedTouches)}function mc(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function fc(e){const t={},s=(e,s)=>{const r={value:e,parent:s,children:[]};return t[e.node.id]=r,r},r=[];for(const n of e){const{nextId:e,parentId:o}=n;if(e&&e in t){const o=t[e];if(o.parent){const e=o.parent.children.indexOf(o);o.parent.children.splice(e,0,s(n,o.parent))}else{const e=r.indexOf(o);r.splice(e,0,s(n,null))}}else if(o in t){const e=t[o];e.children.push(s(n,e))}else r.push(s(n,null))}return r}function gc(e,t){t(e.value);for(let s=e.children.length-1;s>=0;s--)gc(e.children[s],t)}function yc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function wc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function bc(e,t){var s,r;const n=null==(r=null==(s=e.ownerDocument)?void 0:s.defaultView)?void 0:r.frameElement;if(!n||n===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const o=n.getBoundingClientRect(),i=bc(n,t),a=o.height/n.clientHeight;return{x:o.x*i.relativeScale+i.x,y:o.y*i.relativeScale+i.y,relativeScale:a,absoluteScale:i.absoluteScale*a}}function vc(e){return!!e&&(e instanceof al&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(ql.shadowRoot(e)))}function Sc(e,t){const s=e[t[0]];return 1===t.length?s:Sc(s.cssRules[t[1]].cssRules,t.slice(2))}function Cc(e){const t=[...e],s=t.pop();return{positions:t,index:s}}function Ic(e){const t=new Set,s=[];for(let r=e.length;r--;){const n=e[r];t.has(n.id)||(s.push(n),t.add(n.id))}return s}/[1-9][0-9]{12}/.test(Date.now().toString())||(nc=()=>(new Date).getTime());class xc{constructor(){m(this,"id",1),m(this,"styleIDMap",new WeakMap),m(this,"idStyleMap",new Map)}getId(e){var t;return null!=(t=this.styleIDMap.get(e))?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let s;return s=void 0===t?this.id++:t,this.styleIDMap.set(e,s),this.idStyleMap.set(s,e),s}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Mc(e){var t;let s=null;return"getRootNode"in e&&(null==(t=ql.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ql.host(ql.getRootNode(e))&&(s=ql.host(ql.getRootNode(e))),s}function kc(e){let t,s=e;for(;t=Mc(s);)s=t;return s}function Ec(e){const t=e.ownerDocument;if(!t)return!1;const s=kc(e);return ql.contains(t,s)}function Tc(e){const t=e.ownerDocument;return!!t&&(ql.contains(t,e)||Ec(e))}const Nc=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:xc,get _mirror(){return t.mirror},closestElementOfNode:lc,getBaseDimension:bc,getNestedRule:Sc,getPositionsAndIndex:Cc,getRootShadowHost:kc,getShadowHost:Mc,getWindowHeight:ic,getWindowScroll:oc,getWindowWidth:ac,hasShadowRoot:vc,hookSetter:rc,inDom:Tc,isAncestorRemoved:dc,isBlocked:cc,isIgnored:uc,isSerialized:hc,isSerializedIframe:yc,isSerializedStylesheet:wc,iterateResolveTree:gc,legacy_isTouchEvent:pc,get nowTimestamp(){return nc},on:ec,polyfill:mc,queueToResolveTrees:fc,shadowHostInDom:Ec,throttle:sc,uniqueTextMutations:Ic},Symbol.toStringTag,{value:"Module"}));var Oc=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Oc||{}),Ac=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Ac||{}),Rc=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Rc||{}),Dc=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Dc||{}),Lc=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Lc||{}),Pc=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Pc||{}),Fc=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(Fc||{}),_c=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(_c||{});function Bc(e){return"__ln"in e}class Uc{constructor(){m(this,"length",0),m(this,"head",null),m(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let s=0;s<e;s++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Bc(e.previousSibling)){const s=e.previousSibling.__ln.next;t.next=s,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,s&&(s.previous=t)}else if(e.nextSibling&&Bc(e.nextSibling)&&e.nextSibling.__ln.previous){const s=e.nextSibling.__ln.previous;t.previous=s,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,s&&(s.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Wc=(e,t)=>`${e}@${t}`;class jc{constructor(){m(this,"frozen",!1),m(this,"locked",!1),m(this,"texts",[]),m(this,"attributes",[]),m(this,"attributeMap",new WeakMap),m(this,"removes",[]),m(this,"mapRemoves",[]),m(this,"movedMap",{}),m(this,"addedSet",new Set),m(this,"movedSet",new Set),m(this,"droppedSet",new Set),m(this,"removesSubTreeCache",new Set),m(this,"mutationCb"),m(this,"blockClass"),m(this,"blockSelector"),m(this,"maskTextClass"),m(this,"maskTextSelector"),m(this,"inlineStylesheet"),m(this,"maskInputOptions"),m(this,"maskTextFn"),m(this,"maskInputFn"),m(this,"keepIframeSrcFn"),m(this,"recordCanvas"),m(this,"inlineImages"),m(this,"slimDOMOptions"),m(this,"dataURLOptions"),m(this,"doc"),m(this,"mirror"),m(this,"iframeManager"),m(this,"stylesheetManager"),m(this,"shadowDomManager"),m(this,"canvasManager"),m(this,"processedNodeManager"),m(this,"isMaskingEnabled"),m(this,"unattachedDoc"),m(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),m(this,"emit",()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,s=new Uc,r=e=>{let t=e,s=-2;for(;-2===s;)t=t&&t.nextSibling,s=t&&this.mirror.getId(t);return s},n=n=>{var o;const i=ql.parentNode(n);if(!i||!Tc(n)||"TEXTAREA"===(null==(o=n.parentNode)?void 0:o.tagName))return;let a=!1;if(n.nodeType===Node.TEXT_NODE){const e=i.tagName;if("TEXTAREA"===e)return;"STYLE"===e&&this.addedSet.has(i)&&(a=!0)}const l=T(i)?this.mirror.getId(Mc(n)):this.mirror.getId(i),c=r(n);if(-1===l||-1===c)return s.addNode(n);const h=de(n,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,isMaskingEnabled:this.isMaskingEnabled,onSerialize:e=>{yc(e,this.mirror)&&this.iframeManager.addIframe(e),wc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),vc(n)&&this.shadowDomManager.addShadowRoot(ql.shadowRoot(n),this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},cssCaptured:a});h&&(e.push({parentId:l,nextId:c,node:h}),t.add(h.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)zc(this.removesSubTreeCache,e,this.mirror)&&!this.movedSet.has(ql.parentNode(e))||n(e);for(const e of this.addedSet)Gc(this.droppedSet,e)||zc(this.removesSubTreeCache,e,this.mirror)?Gc(this.movedSet,e)?n(e):this.droppedSet.add(e):n(e);let o=null;for(;s.length;){let e=null;if(o){const t=this.mirror.getId(ql.parentNode(o.value)),s=r(o.value);-1!==t&&-1!==s&&(e=o)}if(!e){let t=s.tail;for(;t;){const s=t;if(t=t.previous,s){const t=this.mirror.getId(ql.parentNode(s.value));if(-1===r(s.value))continue;if(-1!==t){e=s;break}{const t=s.value,r=ql.parentNode(t);if(r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const t=ql.host(r);if(-1!==this.mirror.getId(t)){e=s;break}}}}}}if(!e){for(;s.head;)s.removeNode(s.head.value);break}o=e.previous,s.removeNode(e.value),n(e.value)}const i={texts:this.texts.map(e=>{const t=e.node,s=ql.parentNode(t);return s&&"TEXTAREA"===s.tagName&&this.genTextAreaValueMutation(s),{id:this.mirror.getId(t),value:e.value}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{const{attributes:t}=e;if("string"==typeof t.style){const s=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);s.length<t.style.length&&(s+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(i))}),m(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t));const s=Array.from(ql.childNodes(e),e=>ql.textContent(e)||"").join("");t.attributes.value=L({element:e,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:F(e),value:s,maskInputFn:this.maskInputFn})}),m(this,"processMutation",e=>{var t;if(!uc(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=ql.textContent(e.target);cc(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:ce(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,lc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let s=e.attributeName,r=e.target.getAttribute(s);if("value"===s){const e=F(t);r=L({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:r,maskInputFn:this.maskInputFn})}if(cc(e.target,this.blockClass,this.blockSelector,!1)||r===e.oldValue)return;let n=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===s&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;s="rr_src"}if(n||(n={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(n),this.attributeMap.set(e.target,n)),"type"===s&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!oe(t.tagName,s))if(n.attributes[s]=ne(this.doc,P(t.tagName),P(s),r),"style"===s){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const s=this.unattachedDoc.createElement("span");e.oldValue&&s.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),o=t.style.getPropertyPriority(e);r!==s.style.getPropertyValue(e)||o!==s.style.getPropertyPriority(e)?n.styleDiff[e]=""===o?r:[r,o]:n._unchangedStyles[e]=[r,o]}for(const e of Array.from(s.style))""===t.style.getPropertyValue(e)&&(n.styleDiff[e]=!1)}else"open"===s&&"DIALOG"===t.tagName&&(t.matches("dialog:modal")?n.attributes.rr_open_mode="modal":n.attributes.rr_open_mode="non-modal");break}case"childList":if(cc(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===(null==(t=e.target)?void 0:t.tagName))return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const s=this.mirror.getId(t),r=T(e.target)?this.mirror.getId(ql.host(e.target)):this.mirror.getId(e.target);cc(e.target,this.blockClass,this.blockSelector,!1)||uc(t,this.mirror,this.slimDOMOptions)||!hc(t,this.mirror)||(this.addedSet.has(t)?(Vc(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===s||dc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Wc(s,r)]?Vc(this.movedSet,t):(this.removes.push({parentId:r,id:s,isShadow:!(!T(e.target)||!N(e.target))||void 0}),function(e,t){const s=[e];for(;s.length;){const e=s.pop();t.has(e)||(t.add(e),ql.childNodes(e).forEach(e=>s.push(e)))}}(t,this.removesSubTreeCache))),this.mapRemoves.push(t))})}}),m(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(uc(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let s=null;t&&this.mirror.hasNode(t)&&(s=this.mirror.getId(t)),s&&-1!==s&&(this.movedMap[Wc(this.mirror.getId(e),s)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);cc(e,this.blockClass,this.blockSelector,!1)||(ql.childNodes(e).forEach(e=>this.genAdds(e)),vc(e)&&ql.childNodes(ql.shadowRoot(e)).forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","isMaskingEnabled"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Vc(e,t){e.delete(t),ql.childNodes(t).forEach(t=>Vc(e,t))}function zc(e,t,s){return 0!==e.size&&function(e,t,s){const r=ql.parentNode(t);return!!r&&e.has(r)}(e,t)}function Gc(e,t){return 0!==e.size&&function e(t,s){const r=ql.parentNode(s);if(!r)return!1;if(t.has(r))return!0;return e(t,r)}(e,t)}let Yc;const Hc=e=>{if(!Yc)return e;return(...t)=>{try{return e(...t)}catch(e){if(Yc&&!0===Yc(e))return;throw e}}},Zc=[];function Xc(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Jc(e,t){const s=new jc;Zc.push(s),s.init(e);const r=new(Kl())(Hc(s.processMutations.bind(s)));return r.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function $c({mouseInteractionCb:e,doc:t,mirror:s,blockClass:r,blockSelector:n,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const i=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,a=[];let l=null;return Object.keys(Rc).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e]).forEach(o=>{let i=P(o);const c=(t=>o=>{const i=Xc(o);if(cc(i,r,n,!0))return;let a=null,c=t;if("pointerType"in o){switch(o.pointerType){case"mouse":a=Dc.Mouse;break;case"touch":a=Dc.Touch;break;case"pen":a=Dc.Pen}a===Dc.Touch?Rc[t]===Rc.MouseDown?c="TouchStart":Rc[t]===Rc.MouseUp&&(c="TouchEnd"):Dc.Pen}else pc(o)&&(a=Dc.Touch);null!==a?(l=a,(c.startsWith("Touch")&&a===Dc.Touch||c.startsWith("Mouse")&&a===Dc.Mouse)&&(a=null)):Rc[t]===Rc.Click&&(a=l,l=null);const u=pc(o)?o.changedTouches[0]:o;if(!u)return;const d=s.getId(i),{clientX:p,clientY:m}=u;Hc(e)(h({type:Rc[c],id:d,x:p,y:m},null!==a&&{pointerType:a}))})(o);if(window.PointerEvent)switch(Rc[o]){case Rc.MouseDown:case Rc.MouseUp:i=i.replace("mouse","pointer");break;case Rc.TouchStart:case Rc.TouchEnd:return}a.push(ec(i,c,t))}),Hc(()=>{a.forEach(e=>e())})}function Kc({scrollCb:e,doc:t,mirror:s,blockClass:r,blockSelector:n,sampling:o}){return ec("scroll",Hc(sc(Hc(o=>{const i=Xc(o);if(!i||cc(i,r,n,!0))return;const a=s.getId(i);if(i===t&&t.defaultView){const s=oc(t.defaultView);e({id:a,x:s.left,y:s.top})}else e({id:a,x:i.scrollLeft,y:i.scrollTop})}),o.scroll||100)),t)}const Qc=["INPUT","TEXTAREA","SELECT"],qc=new WeakMap;function eh(e){return function(e,t){if(nh("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||nh("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||nh("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||nh("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const s=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(s)}else if(e.parentStyleSheet){const s=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(s)}return t}(e,[])}function th(e,t,s){let r,n;return e?(e.ownerNode?r=t.getId(e.ownerNode):n=s.getId(e),{styleId:n,id:r}):{}}function sh({mirror:e,stylesheetManager:t},s){var r,n,o;let i=null;i="#document"===s.nodeName?e.getId(s):e.getId(ql.host(s));const a="#document"===s.nodeName?null==(r=s.defaultView)?void 0:r.Document:null==(o=null==(n=s.ownerDocument)?void 0:n.defaultView)?void 0:o.ShadowRoot,l=(null==a?void 0:a.prototype)?Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets"):void 0;return null!==i&&-1!==i&&a&&l?(Object.defineProperty(s,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var e;return null==(e=l.get)?void 0:e.call(this)},set(e){var s;const r=null==(s=l.set)?void 0:s.call(this,e);if(null!==i&&-1!==i)try{t.adoptStyleSheets(e,i)}catch(e){}return r}}),Hc(()=>{Object.defineProperty(s,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})})):()=>{}}function rh(e,t={}){const s=e.doc.defaultView;if(!s)return()=>{};let r;!function(e,t){const{mutationCb:s,mousemoveCb:r,mouseInteractionCb:n,scrollCb:o,viewportResizeCb:i,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:c,styleDeclarationCb:h,canvasMutationCb:u,fontCb:d,selectionCb:p,customElementCb:m}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),s(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),n(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),o(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),i(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),a(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),l(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),c(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),h(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),u(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),d(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),p(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),m(...e)}}(e,t),e.recordDOM&&(r=Jc(e,e.doc));const n=function({mousemoveCb:e,sampling:t,doc:s,mirror:r}){if(!1===t.mousemove)return()=>{};const n="number"==typeof t.mousemove?t.mousemove:50,o="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const l=sc(Hc(t=>{const s=Date.now()-i;e(a.map(e=>(e.timeOffset-=s,e)),t),a=[],i=null}),o),c=Hc(sc(Hc(e=>{const t=Xc(e),{clientX:s,clientY:n}=pc(e)?e.changedTouches[0]:e;i||(i=nc()),a.push({x:s,y:n,id:r.getId(t),timeOffset:nc()-i}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?Ac.Drag:e instanceof MouseEvent?Ac.MouseMove:Ac.TouchMove)}),n,{trailing:!1})),h=[ec("mousemove",c,s),ec("touchmove",c,s),ec("drag",c,s)];return Hc(()=>{h.forEach(e=>e())})}(e),o=$c(e),i=Kc(e),a=function({viewportResizeCb:e},{win:t}){let s=-1,r=-1;return ec("resize",Hc(sc(Hc(()=>{const t=ic(),n=ac();s===t&&r===n||(e({width:Number(n),height:Number(t)}),s=t,r=n)}),200)),t)}(e,{win:s}),l=function({inputCb:e,doc:t,mirror:s,blockClass:r,blockSelector:n,ignoreClass:o,ignoreSelector:i,maskInputOptions:a,maskInputFn:l,sampling:c,userTriggeredOnInput:d}){function p(e){let s=Xc(e);const c=e.isTrusted,h=s&&s.tagName;if(s&&"OPTION"===h&&(s=ql.parentElement(s)),!s||!h||Qc.indexOf(h)<0||cc(s,r,n,!0))return;if(s.classList.contains(o)||i&&s.matches(i))return;let u=s.value,p=!1;const f=F(s)||"";"radio"===f||"checkbox"===f?p=s.checked:(a[h.toLowerCase()]||a[f])&&(u=L({element:s,maskInputOptions:a,tagName:h,type:f,value:u,maskInputFn:l})),m(s,d?{text:u,isChecked:p,userTriggered:c}:{text:u,isChecked:p});const g=s.name;"radio"===f&&g&&p&&t.querySelectorAll(`input[type="radio"][name="${g}"]`).forEach(e=>{if(e!==s){const t=e.value;m(e,d?{text:t,isChecked:!p,userTriggered:!1}:{text:t,isChecked:!p})}})}function m(t,r){const n=qc.get(t);if(!n||n.text!==r.text||n.isChecked!==r.isChecked){qc.set(t,r);const n=s.getId(t);Hc(e)(u(h({},r),{id:n}))}}const f=("last"===c.input?["change"]:["input","change"]).map(e=>ec(e,Hc(p),t)),g=t.defaultView;if(!g)return()=>{f.forEach(e=>e())};const y=g.Object.getOwnPropertyDescriptor(g.HTMLInputElement.prototype,"value"),w=[[g.HTMLInputElement.prototype,"value"],[g.HTMLInputElement.prototype,"checked"],[g.HTMLSelectElement.prototype,"value"],[g.HTMLTextAreaElement.prototype,"value"],[g.HTMLSelectElement.prototype,"selectedIndex"],[g.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&f.push(...w.map(e=>rc(e[0],e[1],{set(){Hc(p)({target:this,isTrusted:!1})}},!1,g))),Hc(()=>{f.forEach(e=>e())})}(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:s,mirror:r,sampling:n,doc:o}){const i=Hc(o=>sc(Hc(n=>{const i=Xc(n);if(!i||cc(i,t,s,!0))return;const{currentTime:a,volume:l,muted:c,playbackRate:h,loop:u}=i;e({type:o,id:r.getId(i),currentTime:a,volume:l,muted:c,playbackRate:h,loop:u})}),n.media||500)),a=[ec("play",i(Pc.Play),o),ec("pause",i(Pc.Pause),o),ec("seeked",i(Pc.Seeked),o),ec("volumechange",i(Pc.VolumeChange),o),ec("ratechange",i(Pc.RateChange),o)];return Hc(()=>{a.forEach(e=>e())})}(e);let d=()=>{},p=()=>{},m=()=>{},f=()=>{};e.recordDOM&&(d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:s},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const n=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(n,{apply:Hc((r,n,o)=>{const[i,a]=o,{id:l,styleId:c}=th(n,t,s.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:i,index:a}]}),r.apply(n,o)})}),r.CSSStyleSheet.prototype.addRule=function(e,t,s=this.cssRules.length){const n=`${e} { ${t} }`;return r.CSSStyleSheet.prototype.insertRule.apply(this,[n,s])};const o=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Hc((r,n,o)=>{const[i]=o,{id:a,styleId:l}=th(n,t,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:i}]}),r.apply(n,o)})}),r.CSSStyleSheet.prototype.removeRule=function(e){return r.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Hc((r,n,o)=>{const[i]=o,{id:a,styleId:l}=th(n,t,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:i}),r.apply(n,o)})})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Hc((r,n,o)=>{const[i]=o,{id:a,styleId:l}=th(n,t,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:i}),r.apply(n,o)})}));const l={};oh("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(oh("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),oh("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),oh("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach(([r,n])=>{c[r]={insertRule:n.prototype.insertRule,deleteRule:n.prototype.deleteRule},n.prototype.insertRule=new Proxy(c[r].insertRule,{apply:Hc((r,n,o)=>{const[i,a]=o,{id:l,styleId:c}=th(n.parentStyleSheet,t,s.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:i,index:[...eh(n),a||0]}]}),r.apply(n,o)})}),n.prototype.deleteRule=new Proxy(c[r].deleteRule,{apply:Hc((r,n,o)=>{const[i]=o,{id:a,styleId:l}=th(n.parentStyleSheet,t,s.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...eh(n),i]}]}),r.apply(n,o)})})}),Hc(()=>{r.CSSStyleSheet.prototype.insertRule=n,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule})})}(e,{win:s}),p=sh(e,e.doc),m=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:s,stylesheetManager:r},{win:n}){const o=n.CSSStyleDeclaration.prototype.setProperty;n.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Hc((n,i,a)=>{var l;const[c,h,u]=a;if(s.has(c))return o.apply(i,[c,h,u]);const{id:d,styleId:p}=th(null==(l=i.parentRule)?void 0:l.parentStyleSheet,t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:h,priority:u},index:eh(i.parentRule)}),n.apply(i,a)})});const i=n.CSSStyleDeclaration.prototype.removeProperty;return n.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Hc((n,o,a)=>{var l;const[c]=a;if(s.has(c))return i.apply(o,[c]);const{id:h,styleId:u}=th(null==(l=o.parentRule)?void 0:l.parentStyleSheet,t,r.styleMirror);return(h&&-1!==h||u&&-1!==u)&&e({id:h,styleId:u,remove:{property:c},index:eh(o.parentRule)}),n.apply(o,a)})}),Hc(()=>{n.CSSStyleDeclaration.prototype.setProperty=o,n.CSSStyleDeclaration.prototype.removeProperty=i})}(e,{win:s}),e.collectFonts&&(f=function({fontCb:e,doc:t}){const s=t.defaultView;if(!s)return()=>{};const r=[],n=new WeakMap,o=s.FontFace;s.FontFace=function(e,t,s){const r=new o(e,t,s);return n.set(r,{family:e,buffer:"string"!=typeof t,descriptors:s,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=Ql(t.fonts,"add",(function(t){return function(s){return setTimeout(Hc(()=>{const t=n.get(s);t&&(e(t),n.delete(s))}),0),t.apply(this,[s])}}));return r.push(()=>{s.FontFace=o}),r.push(i),Hc(()=>{r.forEach(e=>e())})}(e)));const g=function(e){const{doc:t,mirror:s,blockClass:r,blockSelector:n,selectionCb:o}=e;let i=!0;const a=Hc(()=>{const e=t.getSelection();if(!e||i&&(null==e?void 0:e.isCollapsed))return;i=e.isCollapsed||!1;const a=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const o=e.getRangeAt(t),{startContainer:i,startOffset:l,endContainer:c,endOffset:h}=o;cc(i,r,n,!0)||cc(c,r,n,!0)||a.push({start:s.getId(i),startOffset:l,end:s.getId(c),endOffset:h})}o({ranges:a})});return a(),ec("selectionchange",a)}(e),y=function({doc:e,customElementCb:t}){const s=e.defaultView;return s&&s.customElements?Ql(s.customElements,"define",(function(e){return function(s,r,n){try{t({define:{name:s}})}catch(e){console.warn("Custom element callback failed for "+s)}return e.apply(this,[s,r,n])}})):()=>{}}(e),w=[];for(const t of e.plugins)w.push(t.observer(t.callback,s,t.options));return Hc(()=>{Zc.forEach(e=>e.reset()),null==r||r.disconnect(),n(),o(),i(),a(),l(),c(),d(),p(),m(),f(),g(),y(),w.forEach(e=>e())})}function nh(e){return void 0!==window[e]}function oh(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ih{constructor(e){m(this,"iframeIdToRemoteIdMap",new WeakMap),m(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,s,r){const n=s||this.getIdToRemoteIdMap(e),o=r||this.getRemoteIdToIdMap(e);let i=n.get(t);return i||(i=this.generateIdFn(),n.set(t,i),o.set(i,t)),i}getIds(e,t){const s=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,s,r))}getRemoteId(e,t,s){const r=s||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const n=r.get(t);return n||-1}getRemoteIds(e,t){const s=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,s))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class ah{constructor(e){m(this,"iframes",new WeakMap),m(this,"crossOriginIframeMap",new WeakMap),m(this,"crossOriginIframeMirror",new ih($)),m(this,"crossOriginIframeStyleMirror"),m(this,"crossOriginIframeRootIdMap",new WeakMap),m(this,"mirror"),m(this,"mutationCb"),m(this,"wrappedEmit"),m(this,"loadListener"),m(this,"stylesheetManager"),m(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ih(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var s,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(s=e.contentWindow)||s.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const s=this.crossOriginIframeMap.get(e.source);if(!s)return;const r=this.transformCrossOriginEvent(s,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var s;switch(t.type){case Oc.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const s=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,s),this.patchRootIdOnNode(t.data.node,s),{timestamp:t.timestamp,type:Oc.IncrementalSnapshot,data:{source:Ac.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Oc.Meta:case Oc.Load:case Oc.DomContentLoaded:return!1;case Oc.Plugin:return t;case Oc.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Oc.IncrementalSnapshot:switch(t.data.source){case Ac.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(t.node,s)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case Ac.Drag:case Ac.TouchMove:case Ac.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case Ac.ViewportResize:return!1;case Ac.MediaInteraction:case Ac.MouseInteraction:case Ac.Scroll:case Ac.CanvasMutation:case Ac.Input:return this.replaceIds(t.data,e,["id"]),t;case Ac.StyleSheetRule:case Ac.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Ac.Font:return t;case Ac.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case Ac.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(s=t.data.styles)||s.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,s,r){for(const n of r)(Array.isArray(t[n])||"number"==typeof t[n])&&(Array.isArray(t[n])?t[n]=e.getIds(s,t[n]):t[n]=e.getId(s,t[n]));return t}replaceIds(e,t,s){return this.replace(this.crossOriginIframeMirror,e,t,s)}replaceStyleIds(e,t,s){return this.replace(this.crossOriginIframeStyleMirror,e,t,s)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===_c.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class lh{constructor(e){m(this,"shadowDoms",new WeakSet),m(this,"mutationCb"),m(this,"scrollCb"),m(this,"bypassOptions"),m(this,"mirror"),m(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!N(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const s=Jc(u(h({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>s.disconnect()),this.restoreHandlers.push(Kc(u(h({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ql.host(e))),this.restoreHandlers.push(sh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const s=this;this.restoreHandlers.push(Ql(e.prototype,"attachShadow",(function(e){return function(r){const n=e.call(this,r),o=ql.shadowRoot(this);return o&&Tc(this)&&s.addShadowRoot(o,t),n}})))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hh="undefined"==typeof Uint8Array?[]:new Uint8Array(256),uh=0;uh<ch.length;uh++)hh[ch.charCodeAt(uh)]=uh;const dh=new Map;const ph=(e,t,s)=>{if(!e||!gh(e,t)&&"object"!=typeof e)return;const r=function(e,t){let s=dh.get(e);return s||(s=new Map,dh.set(e,s)),s.has(t)||s.set(t,[]),s.get(t)}(s,e.constructor.name);let n=r.indexOf(e);return-1===n&&(n=r.length,r.push(e)),n};function mh(e,t,s){if(e instanceof Array)return e.map(e=>mh(e,t,s));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,s=new Uint8Array(e),r=s.length,n="";for(t=0;t<r;t+=3)n+=ch[s[t]>>2],n+=ch[(3&s[t])<<4|s[t+1]>>4],n+=ch[(15&s[t+1])<<2|s[t+2]>>6],n+=ch[63&s[t+2]];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[mh(e.buffer,t,s),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:s}=e;return{rr_type:t,src:s}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[mh(e.data,t,s),e.width,e.height]}}if(gh(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:ph(e,t,s)}}return e}const fh=(e,t,s)=>e.map(e=>mh(e,t,s)),gh=(e,t)=>{const s=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(e=>"function"==typeof t[e]);return Boolean(s.find(s=>e instanceof t[s]))};function yh(e,t,s,r){const n=[];try{const o=Ql(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n,...o){if(!cc(this,t,s,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(n);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(o[0]&&"object"==typeof o[0]){const e=o[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[n,...o])}}));n.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(e=>e())}}function wh(e,t,s,r,n,o){const i=[],a=Object.getOwnPropertyNames(e);for(const l of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if("function"!=typeof e[l])continue;const a=Ql(e,l,(function(e){return function(...i){const a=e.apply(this,i);if(ph(a,o,this),"tagName"in this.canvas&&!cc(this.canvas,r,n,!0)){const e=fh(i,o,this),r={type:t,property:l,args:e};s(this.canvas,r)}return a}}));i.push(a)}catch(r){const n=rc(e,l,{set(e){s(this.canvas,{type:t,property:l,args:[e],setter:!0})}});i.push(n)}return i}const bh="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",vh="undefined"!=typeof window&&window.Blob&&new Blob([(Sh=bh,Uint8Array.from(atob(Sh),e=>e.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});var Sh;function Ch(e){let t;try{if(t=vh&&(window.URL||window.webkitURL).createObjectURL(vh),!t)throw"";const s=new Worker(t,{name:null==e?void 0:e.name});return s.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),s}catch(t){return new Worker("data:text/javascript;base64,"+bh,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class Ih{constructor(e){m(this,"pendingCanvasMutations",new Map),m(this,"rafStamps",{latestId:0,invokeId:null}),m(this,"mirror"),m(this,"mutationCb"),m(this,"resetObservers"),m(this,"frozen",!1),m(this,"locked",!1),m(this,"processMutation",(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)});const{sampling:t="all",win:s,blockClass:r,blockSelector:n,recordCanvas:o,dataURLOptions:i}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&"all"===t&&this.initCanvasMutationObserver(s,r,n),o&&"number"==typeof t&&this.initCanvasFPSObserver(t,s,r,n,{dataURLOptions:i})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,s,r,n){const o=yh(t,s,r,!0),i=new Map,a=new Ch;a.onmessage=e=>{const{id:t}=e.data;if(i.set(t,!1),!("base64"in e.data))return;const{base64:s,type:r,width:n,height:o}=e.data;this.mutationCb({id:t,type:Lc["2D"],commands:[{property:"clearRect",args:[0,0,n,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:s}],type:r}]},0,0]}]})};const l=1e3/e;let c,h=0;const u=e=>{h&&e-h<l||(h=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach(t=>{cc(t,s,r,!0)||e.push(t)}),e})().forEach(async e=>{var t;const s=this.mirror.getId(e);if(i.get(s))return;if(0===e.width||0===e.height)return;if(i.set(s,!0),["webgl","webgl2"].includes(e.__context)){const s=e.getContext(e.__context);!1===(null==(t=null==s?void 0:s.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&s.clear(s.COLOR_BUFFER_BIT)}const r=await createImageBitmap(e);a.postMessage({id:s,bitmap:r,width:e.width,height:e.height,dataURLOptions:n.dataURLOptions},[r])})),c=requestAnimationFrame(u)};c=requestAnimationFrame(u),this.resetObservers=()=>{o(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=yh(e,t,s,!1),n=function(e,t,s,r){const n=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const i of o)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[i])continue;const o=Ql(t.CanvasRenderingContext2D.prototype,i,(function(n){return function(...o){return cc(this.canvas,s,r,!0)||setTimeout(()=>{const s=fh(o,t,this);e(this.canvas,{type:Lc["2D"],property:i,args:s})},0),n.apply(this,o)}}));n.push(o)}catch(s){const r=rc(t.CanvasRenderingContext2D.prototype,i,{set(t){e(this.canvas,{type:Lc["2D"],property:i,args:[t],setter:!0})}});n.push(r)}return()=>{n.forEach(e=>e())}}(this.processMutation.bind(this),e,t,s),o=function(e,t,s,r){const n=[];return n.push(...wh(t.WebGLRenderingContext.prototype,Lc.WebGL,e,s,r,t)),void 0!==t.WebGL2RenderingContext&&n.push(...wh(t.WebGL2RenderingContext.prototype,Lc.WebGL2,e,s,r,t)),()=>{n.forEach(e=>e())}}(this.processMutation.bind(this),e,t,s);this.resetObservers=()=>{r(),n(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const s=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,s)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const s=this.pendingCanvasMutations.get(e);if(!s||-1===t)return;const r=s.map(e=>{const t=e,{type:s}=t;return d(t,["type"])}),{type:n}=s[0];this.mutationCb({id:t,type:n,commands:r}),this.pendingCanvasMutations.delete(e)}}class xh{constructor(e){m(this,"trackedLinkElements",new WeakSet),m(this,"mutationCb"),m(this,"adoptedStyleSheetCb"),m(this,"styleMirror",new xc),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const s={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,(e,s)=>({rule:A(e,t.href),index:s}))})),s.styleIds.push(e)}r.length>0&&(s.styles=r),this.adoptedStyleSheetCb(s)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Mh{constructor(){m(this,"nodeMap",new WeakMap),m(this,"active",!1)}inOtherBuffer(e,t){const s=this.nodeMap.get(e);return s&&Array.from(s).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let kh,Eh,Th,Nh=!1;try{if(2!==Array.from([1],e=>2*e)[0]){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=(null==(e=t.contentWindow)?void 0:e.Array.from)||Array.from,document.body.removeChild(t)}}catch(e){console.debug("Unable to override Array.from",e)}const Oh=D();function Ah(e={}){const{emit:t,checkoutEveryNms:s,checkoutEveryNth:r,blockClass:n="mk-exclude",blockSelector:o=null,ignoreClass:i="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,maskAllInputs:d,maskInputOptions:p,slimDOMOptions:m,maskInputFn:f,maskTextFn:g,hooks:y,packFn:w,sampling:b={},dataURLOptions:v={},mousemoveWait:S,recordDOM:C=!0,recordCanvas:I=!1,recordCrossOriginIframes:x=!1,recordAfter:M=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:k=!1,collectFonts:E=!1,inlineImages:T=!1,plugins:N,keepIframeSrcFn:O=(()=>!1),ignoreCSSAttributes:A=new Set([]),errorHandler:D,isMaskingEnabled:L=!1}=e;Yc=D;const P=!x||window.parent===window;let F=!1;if(!P)try{window.parent.document&&(F=!1)}catch(e){F=!0}if(P&&!t)throw new Error("emit function is required");if(!P&&!F)return()=>{};void 0!==S&&void 0===b.mousemove&&(b.mousemove=S),Oh.reset();const _=!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==p?p:{password:!0},B=!0===m||"all"===m?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===m,headMetaDescKeywords:"all"===m,headTitleMutations:"all"===m}:m||{};let U;mc();let W=0;const j=e=>{for(const t of N||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!F&&(e=w(e)),e};kh=(e,n)=>{var o;const i=e;if(i.timestamp=nc(),!(null==(o=Zc[0])?void 0:o.isFrozen())||i.type===Oc.FullSnapshot||i.type===Oc.IncrementalSnapshot&&i.data.source===Ac.Mutation||Zc.forEach(e=>e.unfreeze()),P)null==t||t(j(i),n);else if(F){const e={type:"rrweb",event:j(i),origin:window.location.origin,isCheckout:n};window.parent.postMessage(e,"*")}if(i.type===Oc.FullSnapshot)U=i,W=0;else if(i.type===Oc.IncrementalSnapshot){if(i.data.source===Ac.Mutation&&i.data.isAttachIframe)return;W++;const e=r&&W>=r,t=s&&i.timestamp-U.timestamp>s;(e||t)&&Eh(!0)}};const V=e=>{kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.Mutation},e)})},z=e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.Scroll},e)}),G=e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.CanvasMutation},e)}),Y=new xh({mutationCb:V,adoptedStyleSheetCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.AdoptedStyleSheet},e)})}),H=new ah({mirror:Oh,mutationCb:V,stylesheetManager:Y,recordCrossOriginIframes:x,wrappedEmit:kh});for(const e of N||[])e.getMirror&&e.getMirror({nodeMirror:Oh,crossOriginIframeMirror:H.crossOriginIframeMirror,crossOriginIframeStyleMirror:H.crossOriginIframeStyleMirror});const Z=new Mh;Th=new Ih({recordCanvas:I,mutationCb:G,win:window,blockClass:n,blockSelector:o,mirror:Oh,sampling:b.canvas,dataURLOptions:v});const X=new lh({mutationCb:V,scrollCb:z,bypassOptions:{blockClass:n,blockSelector:o,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskInputOptions:_,dataURLOptions:v,maskTextFn:g,maskInputFn:f,recordCanvas:I,inlineImages:T,sampling:b,slimDOMOptions:B,iframeManager:H,stylesheetManager:Y,canvasManager:Th,keepIframeSrcFn:O,processedNodeManager:Z,isMaskingEnabled:L},mirror:Oh});Eh=(e=!1)=>{if(!C)return;kh({type:Oc.Meta,data:{href:window.location.href,width:ac(),height:ic()}},e),Y.reset(),X.init(),Zc.forEach(e=>e.lock());const t=function(e,t){const{mirror:s=new R,blockClass:r="mk-exclude",blockSelector:n=null,maskTextClass:o="mk-mask",maskTextSelector:i=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:c=!1,maskAllInputs:h=!1,maskTextFn:u,maskInputFn:d,slimDOM:p=!1,dataURLOptions:m,preserveWhiteSpace:f,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:w,onStylesheetLoad:b,stylesheetLoadTimeout:v,keepIframeSrcFn:S=(()=>!1),isMaskingEnabled:C=!1}=t||{};return de(e,{doc:e,mirror:s,blockClass:r,blockSelector:n,maskTextClass:o,maskTextSelector:i,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===h?{password:!0}:h,maskTextFn:u,maskInputFn:d,slimDOMOptions:!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===p,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===p?{}:p,dataURLOptions:m,inlineImages:l,recordCanvas:c,preserveWhiteSpace:f,onSerialize:g,onIframeLoad:y,iframeLoadTimeout:w,onStylesheetLoad:b,stylesheetLoadTimeout:v,keepIframeSrcFn:S,newlyAddedElement:!1,isMaskingEnabled:C})}(document,{mirror:Oh,blockClass:n,blockSelector:o,maskTextClass:l,maskTextSelector:c,inlineStylesheet:u,maskAllInputs:_,maskTextFn:g,maskInputFn:f,slimDOM:B,dataURLOptions:v,recordCanvas:I,inlineImages:T,isMaskingEnabled:L,onSerialize:e=>{yc(e,Oh)&&H.addIframe(e),wc(e,Oh)&&Y.trackLinkElement(e),vc(e)&&X.addShadowRoot(ql.shadowRoot(e),document)},onIframeLoad:(e,t)=>{H.attachIframe(e,t),X.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:O});if(!t)return console.warn("Failed to snapshot the document");kh({type:Oc.FullSnapshot,data:{node:t,initialOffset:oc(window)}},e),Zc.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Oh.getId(document))};try{const e=[],t=e=>{var t;return Hc(rh)({mutationCb:V,mousemoveCb:(e,t)=>kh({type:Oc.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.MouseInteraction},e)}),scrollCb:z,viewportResizeCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.ViewportResize},e)}),inputCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.Input},e)}),mediaInteractionCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.MediaInteraction},e)}),styleSheetRuleCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.StyleSheetRule},e)}),styleDeclarationCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.StyleDeclaration},e)}),canvasMutationCb:G,fontCb:e=>kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.Font},e)}),selectionCb:e=>{kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.Selection},e)})},customElementCb:e=>{kh({type:Oc.IncrementalSnapshot,data:h({source:Ac.CustomElement},e)})},blockClass:n,ignoreClass:i,ignoreSelector:a,maskTextClass:l,maskTextSelector:c,maskInputOptions:_,inlineStylesheet:u,sampling:b,recordDOM:C,recordCanvas:I,inlineImages:T,userTriggeredOnInput:k,collectFonts:E,doc:e,maskInputFn:f,maskTextFn:g,keepIframeSrcFn:O,blockSelector:o,slimDOMOptions:B,dataURLOptions:v,mirror:Oh,iframeManager:H,stylesheetManager:Y,shadowDomManager:X,processedNodeManager:Z,canvasManager:Th,ignoreCSSAttributes:A,isMaskingEnabled:L,plugins:(null==(t=null==N?void 0:N.filter(e=>e.observer))?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>kh({type:Oc.Plugin,data:{plugin:e.name,payload:t}})})))||[]},y)};H.addLoadListener(s=>{try{e.push(t(s.contentDocument))}catch(e){console.warn(e)}});const s=()=>{Eh(),e.push(t(document)),Nh=!0};return"interactive"===document.readyState||"complete"===document.readyState?s():(e.push(ec("DOMContentLoaded",()=>{kh({type:Oc.DomContentLoaded,data:{}}),"DOMContentLoaded"===M&&s()})),e.push(ec("load",()=>{kh({type:Oc.Load,data:{}}),"load"===M&&s()},window))),()=>{e.forEach(e=>e()),Z.destroy(),Nh=!1,Yc=void 0}}catch(e){console.warn(e)}}function Rh(e){return{all:e=e||new Map,on:function(t,s){var r=e.get(t);r?r.push(s):e.set(t,[s])},off:function(t,s){var r=e.get(t);r&&(s?r.splice(r.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var r=e.get(t);r&&r.slice().map((function(e){e(s)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,s)}))}}}Ah.addCustomEvent=(e,t)=>{if(!Nh)throw new Error("please add custom event after start recording");kh({type:Oc.Custom,data:{tag:e,payload:t}})},Ah.freezePage=()=>{Zc.forEach(e=>e.freeze())},Ah.takeFullSnapshot=e=>{if(!Nh)throw new Error("please take full snapshot after start recording");Eh(e)},Ah.mirror=Oh;const Dh=Object.freeze(Object.defineProperty({__proto__:null,default:Rh},Symbol.toStringTag,{value:"Module"}));function Lh(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const s=e.HTMLElement||e.Element,r={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:s.prototype.scroll||a,scrollIntoView:s.prototype.scrollIntoView},n=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;const o=(i=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);var i;function a(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function h(t,s){const r=e.getComputedStyle(t,null)["overflow"+s];return"auto"===r||"scroll"===r}function u(e){const t=c(e,"Y")&&h(e,"Y"),s=c(e,"X")&&h(e,"X");return t||s}function d(e){for(;e!==t.body&&!1===u(e);)e=e.parentNode||e.host;return e}function p(t){let s,r,o,i=(n()-t.startTime)/468;var a;i=i>1?1:i,a=i,s=.5*(1-Math.cos(Math.PI*a)),r=t.startX+(t.x-t.startX)*s,o=t.startY+(t.y-t.startY)*s,t.method.call(t.scrollable,r,o),r===t.x&&o===t.y||e.requestAnimationFrame(p.bind(e,t))}function m(s,o,i){let l,c,h,u;const d=n();s===t.body?(l=e,c=e.scrollX||e.pageXOffset,h=e.scrollY||e.pageYOffset,u=r.scroll):(l=s,c=s.scrollLeft,h=s.scrollTop,u=a),p({scrollable:l,method:u,startTime:d,startX:c,startY:h,x:o,y:i})}e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?m.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):r.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?r.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},s.prototype.scroll=s.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;m.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)},s.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},s.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void r.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const s=d(this),n=s.getBoundingClientRect(),o=this.getBoundingClientRect();s!==t.body?(m.call(this,s,s.scrollLeft+o.left-n.left,s.scrollTop+o.top-n.top),"fixed"!==e.getComputedStyle(s).position&&e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}}class Ph{constructor(e=[],t){m(this,"timeOffset",0),m(this,"speed"),m(this,"actions"),m(this,"raf",null),m(this,"lastTimestamp"),this.actions=e,this.speed=t.speed}addAction(e){const t=!0===this.raf;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const t=this.findActionIndex(e);this.actions.splice(t,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(!0!==this.raf&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,s=this.actions.length-1;for(;t<=s;){const r=Math.floor((t+s)/2);if(this.actions[r].delay<e.delay)t=r+1;else{if(!(this.actions[r].delay>e.delay))return r+1;s=r-1}}return t}}function Fh(e,t){if(e.type===Oc.IncrementalSnapshot&&e.data.source===Ac.MouseMove&&e.data.positions&&e.data.positions.length){const s=e.data.positions[0].timeOffset,r=e.timestamp+s;return e.delay=r-t,r-t}return e.delay=e.timestamp-t,e.delay}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _h(e,t){var s="function"==typeof Symbol&&e[Symbol.iterator];if(!s)return e;var r,n,o=s.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}return i}var Bh,Uh;(Uh=Bh||(Bh={}))[Uh.NotStarted=0]="NotStarted",Uh[Uh.Running=1]="Running",Uh[Uh.Stopped=2]="Stopped";var Wh={type:"xstate.init"};function jh(e){return void 0===e?[]:[].concat(e)}function Vh(e){return{type:"xstate.assign",assignment:e}}function zh(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function Gh(e){return function(t){return e===t}}function Yh(e){return"string"==typeof e?{type:e}:e}function Hh(e,t){return{value:e,context:t,actions:[],changed:!1,matches:Gh(e)}}function Zh(e,t,s){var r=t,n=!1;return[e.filter((function(e){if("xstate.assign"===e.type){n=!0;var t=Object.assign({},r);return"function"==typeof e.assignment?t=e.assignment(r,s):Object.keys(e.assignment).forEach((function(n){t[n]="function"==typeof e.assignment[n]?e.assignment[n](r,s):e.assignment[n]})),r=t,!1}return!0})),r,n]}function Xh(e,t){void 0===t&&(t={});var s=_h(Zh(jh(e.states[e.initial].entry).map((function(e){return zh(e,t.actions)})),e.context,Wh),2),r=s[0],n=s[1],o={config:e,_options:t,initialState:{value:e.initial,actions:r,context:n,matches:Gh(e.initial)},transition:function(t,s){var r,n,i="string"==typeof t?{value:t,context:e.context}:t,a=i.value,l=i.context,c=Yh(s),h=e.states[a];if(h.on){var u=jh(h.on[c.type]);try{for(var d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,s=t&&e[t],r=0;if(s)return s.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),p=d.next();!p.done;p=d.next()){var m=p.value;if(void 0===m)return Hh(a,l);var f="string"==typeof m?{target:m}:m,g=f.target,y=f.actions,w=void 0===y?[]:y,b=f.cond,v=void 0===b?function(){return!0}:b,S=void 0===g,C=null!=g?g:a,I=e.states[C];if(v(l,c)){var x=_h(Zh((S?jh(w):[].concat(h.exit,w,I.entry).filter((function(e){return e}))).map((function(e){return zh(e,o._options.actions)})),l,c),3),M=x[0],k=x[1],E=x[2],T=null!=g?g:a;return{value:T,context:k,actions:M,changed:g!==a||M.length>0||E,matches:Gh(T)}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}return Hh(a,l)}};return o}var Jh=function(e,t){return e.actions.forEach((function(s){var r=s.exec;return r&&r(e.context,t)}))};function $h(e){var t=e.initialState,s=Bh.NotStarted,r=new Set,n={_machine:e,send:function(n){s===Bh.Running&&(t=e.transition(t,n),Jh(t,Yh(n)),r.forEach((function(e){return e(t)})))},subscribe:function(e){return r.add(e),e(t),{unsubscribe:function(){return r.delete(e)}}},start:function(r){if(r){var o="object"==typeof r?r:{context:e.config.context,value:r};t={value:o.value,actions:[],context:o.context,matches:Gh(o.value)}}return s=Bh.Running,Jh(t,Wh),n},stop:function(){return s=Bh.Stopped,r.clear(),n},get state(){return t},get status(){return s}};return n}function Kh(e,{getCastFn:t,applyEventsSynchronously:s,emitter:r}){return $h(Xh({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Vh({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:Vh((e,t)=>{let s=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(s=t.payload.timeOffset),u(h({},e),{timeOffset:s,baselineTime:e.events[0].timestamp+s})}),play(e){var n;const{timer:o,events:i,baselineTime:a,lastPlayedEvent:l}=e;o.clear();for(const e of i)Fh(e,a);const c=function(e,t){for(let s=e.length-1;s>=0;s--){const r=e[s];if(r.type===Oc.Meta&&r.timestamp<=t)return e.slice(s)}return e}(i,a);let h=null==l?void 0:l.timestamp;(null==l?void 0:l.type)===Oc.IncrementalSnapshot&&l.data.source===Ac.MouseMove&&(h=l.timestamp+(null==(n=l.data.positions[0])?void 0:n.timeOffset)),a<(h||0)&&r.emit(Fc.PlayBack);const u=new Array;for(const e of c)if(!(h&&h<a&&(e.timestamp<=h||e===l)))if(e.timestamp<a)u.push(e);else{const s=t(e,!1);o.addAction({doAction:()=>{s()},delay:e.delay})}s(u),r.emit(Fc.Flush),o.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:Vh(e=>u(h({},e),{lastPlayedEvent:null})),startLive:Vh({baselineTime:(e,t)=>(e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:Vh((e,s)=>{const{baselineTime:r,timer:n,events:o}=e;if("ADD_EVENT"===s.type){const{event:e}=s.payload;Fh(e,r);let i=o.length-1;if(!o[i]||o[i].timestamp<=e.timestamp)o.push(e);else{let t=-1,s=0;for(;s<=i;){const t=Math.floor((s+i)/2);o[t].timestamp<=e.timestamp?s=t+1:i=t-1}-1===t&&(t=s),o.splice(t,0,e)}const a=e.timestamp<r,l=t(e,a);a?l():n.isActive()&&n.addAction({doAction:()=>{l()},delay:e.delay})}return u(h({},e),{events:o})})}}))}const Qh=new Map;function qh(e,t){let s=Qh.get(e);return s||(s=new Map,Qh.set(e,s)),s.has(t)||s.set(t,[]),s.get(t)}function eu(e,t,s){return async r=>{if(r&&"object"==typeof r&&"rr_type"in r){if(s&&(s.isUnchanged=!1),"ImageBitmap"===r.rr_type&&"args"in r){const n=await eu(e,t,s)(r.args);return await createImageBitmap.apply(null,n)}if("index"in r){if(s||null===t)return r;const{rr_type:e,index:n}=r;return qh(t,e)[n]}if("args"in r){const{rr_type:n,args:o}=r;return new(0,window[n])(...await Promise.all(o.map(eu(e,t,s))))}if("base64"in r)return function(e){var t,s,r,n,o,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),h=new Uint8Array(c);for(t=0;t<a;t+=4)s=hh[e.charCodeAt(t)],r=hh[e.charCodeAt(t+1)],n=hh[e.charCodeAt(t+2)],o=hh[e.charCodeAt(t+3)],h[l++]=s<<2|r>>4,h[l++]=(15&r)<<4|n>>2,h[l++]=(3&n)<<6|63&o;return c}(r.base64);if("src"in r){const t=e.get(r.src);if(t)return t;{const t=new Image;return t.src=r.src,e.set(r.src,t),t}}if("data"in r&&"Blob"===r.rr_type){const n=await Promise.all(r.data.map(eu(e,t,s)));return new Blob(n,{type:r.type})}}else if(Array.isArray(r)){return await Promise.all(r.map(eu(e,t,s)))}return r}}const tu=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];async function su({mutation:e,target:t,type:s,imageMap:r,errorHandler:n}){try{const n=function(e,t){try{return t===Lc.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}(t,s);if(!n)return;if(e.setter)return void(n[e.property]=e.args[0]);const o=n[e.property],i=await Promise.all(e.args.map(eu(r,n)));!function(e,t){if(!(null==t?void 0:t.constructor))return;const{name:s}=t.constructor;if(!tu.includes(s))return;const r=qh(e,s);r.includes(t)||r.push(t)}(n,o.apply(n,i))}catch(t){n(e,t)}}async function ru({event:e,mutation:t,target:s,imageMap:r,canvasEventMap:n,errorHandler:o}){try{const i=n.get(e)||t,a="commands"in i?i.commands:[i];if([Lc.WebGL,Lc.WebGL2].includes(t.type)){for(let e=0;e<a.length;e++){const n=a[e];await su({mutation:n,type:t.type,target:s,imageMap:r,errorHandler:o})}return}await async function({event:e,mutations:t,target:s,imageMap:r,errorHandler:n}){const o=s.getContext("2d");if(!o)return void n(t[0],new Error("Canvas context is null"));const i=t.map(async e=>Promise.all(e.args.map(eu(r,o))));(await Promise.all(i)).forEach((s,i)=>{const a=t[i];try{if(a.setter)return void(o[a.property]=a.args[0]);const t=o[a.property];"drawImage"===a.property&&"string"==typeof a.args[0]?(r.get(e),t.apply(o,a.args)):t.apply(o,s)}catch(e){n(a,e)}})}({event:e,mutations:a,target:s,imageMap:r,errorHandler:o})}catch(e){o(t,e)}}class nu{constructor(e){m(this,"mediaMap",new Map),m(this,"warn"),m(this,"service"),m(this,"speedService"),m(this,"emitter"),m(this,"getCurrentTime"),m(this,"metadataCallbackMap",new Map),this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(Fc.Start,this.start.bind(this)),this.emitter.on(Fc.SkipStart,this.start.bind(this)),this.emitter.on(Fc.Pause,this.pause.bind(this)),this.emitter.on(Fc.Finish,this.pause.bind(this)),this.speedService.subscribe(()=>{this.syncAllMediaElements()})}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach((t,s)=>{this.syncTargetWithState(s),e.pause&&s.pause()})}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:s}){if(s.isPlaying){const r=(e-s.lastInteractionTimeOffset)/1e3*s.playbackRate,n="duration"in t&&t.duration;if(Number.isNaN(n))return void this.waitForMetadata(t);let o=s.currentTimeAtLastInteraction+r;t.loop&&!1!==n&&(o%=n),t.currentTime=o}else t.pause(),t.currentTime=s.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e))return;if(!("addEventListener"in e))return;const t=()=>{this.metadataCallbackMap.delete(e);const t=this.mediaMap.get(e);t&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t})};this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:s}){var r,n,o,i,a;const l=this.mediaMap.get(e),{type:c,playbackRate:h,currentTime:u,muted:d,volume:p,loop:m}=s;return{isPlaying:c===Pc.Play||c!==Pc.Pause&&((null==l?void 0:l.isPlaying)||null!==e.getAttribute("autoplay")),currentTimeAtLastInteraction:null!=(r=null!=u?u:null==l?void 0:l.currentTimeAtLastInteraction)?r:0,lastInteractionTimeOffset:t,playbackRate:null!=(n=null!=h?h:null==l?void 0:l.playbackRate)?n:1,volume:null!=(o=null!=p?p:null==l?void 0:l.volume)?o:1,muted:null!=(i=null!=d?d:null==l?void 0:l.muted)?i:null===e.getAttribute("muted"),loop:null!=(a=null!=m?m:null==l?void 0:l.loop)?a:null===e.getAttribute("loop")}}syncTargetWithState(e){const t=this.mediaMap.get(e);if(!t)return;const{muted:s,loop:r,volume:n,isPlaying:o}=t,i=this.service.state.matches("paused"),a=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==n&&(e.volume=n),e.muted=s,e.loop=r,e.playbackRate!==a&&(e.playbackRate=a),o&&!i?e.play():e.pause()}catch(e){this.warn("Failed to replay media interactions: "+(e.message||e))}}addMediaElements(e,t,s){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;const r=e,n=s.getMeta(r);if(!n||!("attributes"in n))return;const o=this.service.state.matches("paused"),i=n.attributes;let a=!1;a=i.rr_mediaState?"played"===i.rr_mediaState:null!==r.getAttribute("autoplay"),a&&o&&r.pause();let l=1;"number"==typeof i.rr_mediaPlaybackRate&&(l=i.rr_mediaPlaybackRate);let c=!1;c="boolean"==typeof i.rr_mediaMuted?i.rr_mediaMuted:null!==r.getAttribute("muted");let h=!1;h="boolean"==typeof i.rr_mediaLoop?i.rr_mediaLoop:null!==r.getAttribute("loop");let u=1;"number"==typeof i.rr_mediaVolume&&(u=i.rr_mediaVolume);let d=0;"number"==typeof i.rr_mediaCurrentTime&&(d=i.rr_mediaCurrentTime),this.mediaMap.set(r,{isPlaying:a,currentTimeAtLastInteraction:d,lastInteractionTimeOffset:t,playbackRate:l,volume:u,muted:c,loop:h}),this.syncTargetWithState(r)}mediaMutation({target:e,timeOffset:t,mutation:s}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:s})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}}function ou(e,t){if("DIALOG"!==e.nodeName||e instanceof al)return;const s=e,r=s.open,n=r&&s.matches("dialog:modal"),o=s.getAttribute("rr_open_mode"),i="string"==typeof(null==t?void 0:t.attributes.open)||"string"==typeof s.getAttribute("open"),a="modal"===o;r&&!(n&&"non-modal"===o||!n&&a)||(s.isConnected?(r&&s.close(),i&&(a?s.showModal():s.show())):console.warn("dialog is not attached to the dom",s))}function iu(e,t){if("DIALOG"!==e.nodeName||e instanceof al)return;const s=e;s.isConnected?null===t.attributes.open&&(s.removeAttribute("open"),s.removeAttribute("rr_open_mode")):console.warn("dialog is not attached to the dom",s)}const au=Rh||Dh,lu={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function cu(e){return("ontouchstart"in window||navigator.maxTouchPoints>0)&&e.type==Oc.IncrementalSnapshot&&(e.data.source==Ac.TouchMove||e.data.source==Ac.MouseInteraction&&e.data.type==Rc.TouchStart)}const{addCustomEvent:hu}=Ah,{freezePage:uu}=Ah,{takeFullSnapshot:du}=Ah;if(t.EventType=Oc,t.IncrementalSource=Ac,t.MouseInteractions=Rc,t.Replayer=class{constructor(e,t){if(m(this,"wrapper"),m(this,"iframe"),m(this,"service"),m(this,"speedService"),m(this,"config"),m(this,"usingVirtualDom",!1),m(this,"virtualDom",new Nl),m(this,"mouse"),m(this,"mouseTail",null),m(this,"tailPositions",[]),m(this,"emitter",au()),m(this,"nextUserInteractionEvent"),m(this,"legacy_missingNodeRetryMap",{}),m(this,"cache",rn()),m(this,"imageMap",new Map),m(this,"canvasEventMap",new Map),m(this,"mirror",D()),m(this,"styleMirror",new xc),m(this,"mediaManager"),m(this,"firstFullSnapshot",null),m(this,"newDocumentQueue",[]),m(this,"mousePos",null),m(this,"touchActive",null),m(this,"lastMouseDownEvent",null),m(this,"lastHoveredRootNode"),m(this,"lastSelectionData",null),m(this,"constructedStyleMutations",[]),m(this,"adoptedStyleSheets",[]),m(this,"handleResize",e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])t&&(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))}),m(this,"applyEventsSynchronously",e=>{for(const t of e){switch(t.type){case Oc.DomContentLoaded:case Oc.Load:case Oc.Custom:continue;case Oc.FullSnapshot:case Oc.Meta:case Oc.Plugin:case Oc.IncrementalSnapshot:}this.getCastFn(t,!0)()}}),m(this,"getCastFn",(e,t=!1)=>{let s;switch(e.type){case Oc.DomContentLoaded:case Oc.Load:break;case Oc.Custom:s=()=>{this.emitter.emit(Fc.CustomEvent,e)};break;case Oc.Meta:s=()=>this.emitter.emit(Fc.Resize,{width:e.data.width,height:e.data.height});break;case Oc.FullSnapshot:s=()=>{var s;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(e,t),null==(s=this.iframe.contentWindow)||s.scrollTo(e.data.initialOffset)};break;case Oc.IncrementalSnapshot:s=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,s={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:s}),this.emitter.emit(Fc.SkipStart,s)}}}}return()=>{s&&s();for(const s of this.config.plugins||[])s.handler&&s.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const r=this.service.state.context.events.length-1;if(!this.config.liveMode&&e===this.service.state.context.events[r]){const t=()=>{r<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(Fc.Finish))};let s=50;e.type===Oc.IncrementalSnapshot&&e.data.source===Ac.MouseMove&&e.data.positions.length&&(s+=Math.max(0,-e.data.positions[0].timeOffset)),setTimeout(t,s)}this.emitter.emit(Fc.EventCast,e)}}),!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const s={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:1e4,showWarning:!0,showDebug:!1,blockClass:"mk-exclude",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:lu,useVirtualDom:!0,logger:console};this.config=Object.assign({},s,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(Fc.Resize,this.handleResize),this.setupDom();for(const e of this.config.plugins||[])e.getMirror&&e.getMirror({nodeMirror:this.mirror});this.emitter.on(Fc.Flush,()=>{if(this.usingVirtualDom){const e={mirror:this.mirror,applyCanvas:(e,t,s)=>{ru({event:e,mutation:t,target:s,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===Ac.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===Ac.StyleDeclaration&&this.applyStyleDeclaration(e,t)},afterAppend:(e,t)=>{for(const s of this.config.plugins||[])s.onBuild&&s.onBuild(e,{id:t,replayer:this})}};if(this.iframe.contentDocument)try{xl(this.iframe.contentDocument,this.virtualDom,e,this.virtualDom.mirror)}catch(e){console.warn(e)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const t in this.legacy_missingNodeRetryMap)try{const s=this.legacy_missingNodeRetryMap[t],r=kl(s.node,this.mirror,this.virtualDom.mirror);xl(r,s.node,e,this.virtualDom.mirror),s.node=r}catch(e){this.warn(e)}this.constructedStyleMutations.forEach(e=>{this.applyStyleSheetMutation(e)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(e=>{this.applyAdoptedStyleSheet(e)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[e,t]=this.lastMouseDownEvent;e.dispatchEvent(t)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(Fc.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()});const r=new Ph([],{speed:this.config.speed});this.service=Kh({events:e.map(e=>t&&t.unpackFn?t.unpackFn(e):e).sort((e,t)=>e.timestamp-t.timestamp),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(e=>{this.emitter.emit(Fc.StateChange,{player:e})}),this.speedService=$h(Xh({id:"speed",context:{normalSpeed:-1,timer:r},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:Vh({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe(e=>{this.emitter.emit(Fc.StateChange,{speed:e})}),this.mediaManager=new nu({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});const n=this.service.state.context.events.find(e=>e.type===Oc.Meta),o=this.service.state.context.events.find(e=>e.type===Oc.FullSnapshot);if(n){const{width:e,height:t}=n.data;setTimeout(()=>{this.emitter.emit(Fc.Resize,{width:e,height:t})},0)}o&&setTimeout(()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=o,this.rebuildFullSnapshot(o),null==(e=this.iframe.contentWindow)||e.scrollTo(o.data.initialOffset))},1),this.service.state.context.events.find(cu)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,s;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null==(s=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||s.classList.remove("rrweb-paused"),this.emitter.emit(Fc.Start)}pause(e){var t,s;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null==(s=null==(t=this.iframe.contentDocument)?void 0:t.getElementsByTagName("html")[0])||s.classList.add("rrweb-paused"),this.emitter.emit(Fc.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(Fc.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(Fc.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;cu(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:t}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=rn()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Lh(this.iframe.contentWindow,this.iframe.contentDocument),mc(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const s=[],r=new Set,n=(t,n)=>{if("DIALOG"===t.nodeName&&r.add(t),this.collectIframeAndAttachDocument(s,t),this.mediaManager.isSupportedMediaElement(t)){const{events:s}=this.service.state.context;this.mediaManager.addMediaElements(t,e.timestamp-s[0].timestamp,this.mirror)}for(const e of this.config.plugins||[])e.onBuild&&e.onBuild(t,{id:n,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),ln(e.data.node,{doc:this.iframe.contentDocument,afterAppend:n,cache:this.cache,mirror:this.mirror}),n(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:e,builtNode:t}of s)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter(t=>t!==e);const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),r.forEach(e=>ou(e)),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(Fc.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var s;const r=(n=this.config.blockClass,[`.${n} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var n;if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),r.length)if(this.usingVirtualDom){const s=this.virtualDom.createElement("style");this.virtualDom.mirror.add(s,Vl(s,this.virtualDom.unserializedId)),e.insertBefore(s,t),s.rules.push({source:Ac.StyleSheetRule,adds:r.map((e,t)=>({rule:e,index:t}))})}else{const n=document.createElement("style");e.insertBefore(n,t);for(let e=0;e<r.length;e++)null==(s=n.sheet)||s.insertRule(r[e],e)}}attachDocumentToIframe(e,t){const s=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],n=new Set,o=(e,o)=>{"DIALOG"===e.nodeName&&n.add(e),this.collectIframeAndAttachDocument(r,e);const i=s.getMeta(e);if((null==i?void 0:i.type)===_c.Element&&"HTML"===(null==i?void 0:i.tagName.toUpperCase())){const{documentElement:e,head:s}=t.contentDocument;this.insertStyleRules(e,s)}if(!this.usingVirtualDom)for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:o,replayer:this})};an(e.node,{doc:t.contentDocument,mirror:s,hackCss:!0,skipChild:!1,afterAppend:o,cache:this.cache}),o(t.contentDocument,e.node.id);for(const{mutationInQueue:e,builtNode:t}of r)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter(t=>t!==e);n.forEach(e=>ou(e))}collectIframeAndAttachDocument(e,t){if(yc(t,this.mirror)){const s=this.newDocumentQueue.find(e=>e.parentId===this.mirror.getId(t));s&&e.push({mutationInQueue:s,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null==(e=this.iframe.contentDocument)?void 0:e.head;if(t){const e=new Set;let s,r=this.service.state;const n=()=>{r=this.service.state};this.emitter.on(Fc.Start,n),this.emitter.on(Fc.Pause,n);const o=()=>{this.emitter.off(Fc.Start,n),this.emitter.off(Fc.Pause,n)};t.querySelectorAll('link[rel="stylesheet"]').forEach(t=>{t.sheet||(e.add(t),t.addEventListener("load",()=>{e.delete(t),0===e.size&&-1!==s&&(r.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(Fc.LoadStylesheetEnd),s&&clearTimeout(s),o())}))}),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(Fc.LoadStylesheetStart),s=setTimeout(()=>{r.matches("playing")&&this.play(this.getCurrentTime()),s=-1,o()},this.config.loadTimeout))}}async preloadAllImages(){const e=[];for(const t of this.service.state.context.events)if(t.type===Oc.IncrementalSnapshot&&t.data.source===Ac.CanvasMutation){e.push(this.deserializeAndPreloadCanvasEvents(t.data,t));("commands"in t.data?t.data.commands:[t.data]).forEach(e=>{this.preloadImages(e,t)})}return Promise.all(e)}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const e=document.createElement("canvas"),t=e.getContext("2d"),s=null==t?void 0:t.createImageData(e.width,e.height);null==t||t.putImageData(s,0,0)}}async deserializeAndPreloadCanvasEvents(e,t){if(!this.canvasEventMap.has(t)){const s={isUnchanged:!0};if("commands"in e){const r=await Promise.all(e.commands.map(async e=>{const t=await Promise.all(e.args.map(eu(this.imageMap,null,s)));return u(h({},e),{args:t})}));!1===s.isUnchanged&&this.canvasEventMap.set(t,u(h({},e),{commands:r}))}else{const r=await Promise.all(e.args.map(eu(this.imageMap,null,s)));!1===s.isUnchanged&&this.canvasEventMap.set(t,u(h({},e),{args:r}))}}}applyIncremental(e,t){var s,r,n;const{data:o}=e;switch(o.source){case Ac.Mutation:try{this.applyMutation(o,t)}catch(e){this.warn("Exception in mutation "+(e.message||e),o)}break;case Ac.Drag:case Ac.TouchMove:case Ac.MouseMove:if(t){const e=o.positions[o.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:o}}else o.positions.forEach(s=>{const r={doAction:()=>{this.moveAndHover(s.x,s.y,s.id,t,o)},delay:s.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(r)}),this.timer.addAction({doAction(){},delay:e.delay-(null==(s=o.positions[0])?void 0:s.timeOffset)});break;case Ac.MouseInteraction:{if(-1===o.id)break;const e=new Event(P(Rc[o.type])),s=this.mirror.getNode(o.id);if(!s)return this.debugNodeNotFound(o,o.id);this.emitter.emit(Fc.MouseInteraction,{type:o.type,target:s});const{triggerFocus:r}=this.config;switch(o.type){case Rc.Blur:"blur"in s&&s.blur();break;case Rc.Focus:r&&s.focus&&s.focus({preventScroll:!0});break;case Rc.Click:case Rc.TouchStart:case Rc.TouchEnd:case Rc.MouseDown:case Rc.MouseUp:t?(o.type===Rc.TouchStart?this.touchActive=!0:o.type===Rc.TouchEnd&&(this.touchActive=!1),o.type===Rc.MouseDown?this.lastMouseDownEvent=[s,e]:o.type===Rc.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:o.x||0,y:o.y||0,id:o.id,debugData:o}):(o.type===Rc.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(o.x||0,o.y||0,o.id,t,o),o.type===Rc.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):o.type===Rc.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):o.type===Rc.TouchEnd?this.mouse.classList.remove("touch-active"):s.dispatchEvent(e));break;case Rc.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:s.dispatchEvent(e)}break}case Ac.Scroll:if(-1===o.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);e.scrollData=o;break}this.applyScroll(o,t);break;case Ac.ViewportResize:this.emitter.emit(Fc.Resize,{width:o.width,height:o.height});break;case Ac.Input:if(-1===o.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(o.id);if(!e)return this.debugNodeNotFound(o,o.id);e.inputData=o;break}this.applyInput(o);break;case Ac.MediaInteraction:{const t=this.usingVirtualDom?this.virtualDom.mirror.getNode(o.id):this.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);const s=t,{events:r}=this.service.state.context;this.mediaManager.mediaMutation({target:s,timeOffset:e.timestamp-r[0].timestamp,mutation:o});break}case Ac.StyleSheetRule:case Ac.StyleDeclaration:this.usingVirtualDom?o.styleId?this.constructedStyleMutations.push(o):o.id&&(null==(r=this.virtualDom.mirror.getNode(o.id))||r.rules.push(o)):this.applyStyleSheetMutation(o);break;case Ac.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);t.canvasMutations.push({event:e,mutation:o})}else{const t=this.mirror.getNode(o.id);if(!t)return this.debugNodeNotFound(o,o.id);ru({event:e,mutation:o,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case Ac.Font:try{const e=new FontFace(o.family,o.buffer?new Uint8Array(JSON.parse(o.fontSource)):o.fontSource,o.descriptors);null==(n=this.iframe.contentDocument)||n.fonts.add(e)}catch(e){this.warn(e)}break;case Ac.Selection:if(t){this.lastSelectionData=o;break}this.applySelection(o);break;case Ac.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(o):this.applyAdoptedStyleSheet(o)}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,function(e,t=pn(),s=new Nl){(function e(r,n){const o=Wl(r,s,t,n);if(null!==o)if("IFRAME"!==(null==n?void 0:n.nodeName)&&r.nodeType!==vl.DOCUMENT_FRAGMENT_NODE&&(null==n||n.appendChild(o),o.parentNode=n,o.parentElement=n),"IFRAME"===r.nodeName){const t=r.contentDocument;t&&e(t,o)}else r.nodeType!==vl.DOCUMENT_NODE&&r.nodeType!==vl.ELEMENT_NODE&&r.nodeType!==vl.DOCUMENT_FRAGMENT_NODE||(r.nodeType===vl.ELEMENT_NODE&&r.shadowRoot&&e(r.shadowRoot,o),r.childNodes.forEach(t=>e(t,o)))})(e,null)}(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const t=this.legacy_missingNodeRetryMap[e],s=Wl(t.node,this.virtualDom,this.mirror);s&&(t.node=s)}catch(e){this.warn(e)}const s=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(t=>!!s.getNode(t.id)||(this.warnNodeNotFound(e,t.id),!1)),e.removes.forEach(t=>{var r;const n=s.getNode(t.id);if(!n)return;let o=s.getNode(t.parentId);if(!o)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&vc(o)&&(o=o.shadowRoot),s.removeNodeFromMap(n),o)try{o.removeChild(n),this.usingVirtualDom&&"#text"===n.nodeName&&"STYLE"===o.nodeName&&(null==(r=o.rules)?void 0:r.length)>0&&(o.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",o,n,e)}});const r=h({},this.legacy_missingNodeRetryMap),n=[],o=e=>{var t,o;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let i=s.getNode(e.parentId);if(!i)return e.node.type===_c.Document?this.newDocumentQueue.push(e):n.push(e);e.node.isShadow&&(vc(i)||i.attachShadow({mode:"open"}),i=i.shadowRoot);let a=null,l=null;if(e.previousId&&(a=s.getNode(e.previousId)),e.nextId&&(l=s.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=s.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return n.push(e);if(e.node.rootId&&!s.getNode(e.node.rootId))return;const c=e.node.rootId?s.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(yc(i,s))return void this.attachDocumentToIframe(e,i);const h=(e,t)=>{if(!this.usingVirtualDom){ou(e);for(const s of this.config.plugins||[])s.onBuild&&s.onBuild(e,{id:t,replayer:this})}},u=an(e.node,{doc:c,mirror:s,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:h});if(-1===e.previousId||-1===e.nextId)return void(r[e.node.id]={node:u,mutation:e});const d=s.getMeta(i);if(d&&d.type===_c.Element&&e.node.type===_c.Text){const e=Array.isArray(i.childNodes)?i.childNodes:Array.from(i.childNodes);if("textarea"===d.tagName)for(const t of e)t.nodeType===i.TEXT_NODE&&i.removeChild(t);else if("style"===d.tagName&&1===e.length)for(const t of e)t.nodeType!==i.TEXT_NODE||s.hasNode(t)||(u.textContent=t.textContent,i.removeChild(t))}else if((null==d?void 0:d.type)===_c.Document){const s=i;e.node.type===_c.DocumentType&&(null==(t=s.childNodes[0])?void 0:t.nodeType)===Node.DOCUMENT_TYPE_NODE&&s.removeChild(s.childNodes[0]),"HTML"===u.nodeName&&s.documentElement&&s.removeChild(s.documentElement)}if(a&&a.nextSibling&&a.nextSibling.parentNode?i.insertBefore(u,a.nextSibling):l&&l.parentNode?i.contains(l)?i.insertBefore(u,l):i.insertBefore(u,null):i.appendChild(u),h(u,e.node.id),this.usingVirtualDom&&"#text"===u.nodeName&&"STYLE"===i.nodeName&&(null==(o=i.rules)?void 0:o.length)>0&&(i.rules=[]),yc(u,this.mirror)){const e=this.mirror.getId(u),t=this.newDocumentQueue.find(t=>t.parentId===e);t&&(this.attachDocumentToIframe(t,u),this.newDocumentQueue=this.newDocumentQueue.filter(e=>e!==t))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(r,i,u,e)};e.adds.forEach(e=>{o(e)});const i=Date.now();for(;n.length;){const e=fc(n);if(n.length=0,Date.now()-i>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e){s.getNode(t.value.parentId)?gc(t,e=>{o(e)}):this.debug("Drop resolve tree since there is no parent for the root node.",t)}}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),Ic(e.texts).forEach(t=>{var r;const n=s.getNode(t.id);if(!n){if(e.removes.find(e=>e.id===t.id))return;return this.warnNodeNotFound(e,t.id)}const o=n.parentElement;if(t.value&&o&&"STYLE"===o.tagName?n.textContent=sn(t.value,this.cache):n.textContent=t.value,this.usingVirtualDom){const e=n.parentNode;(null==(r=null==e?void 0:e.rules)?void 0:r.length)>0&&(e.rules=[])}}),e.attributes.forEach(t=>{var r;const n=s.getNode(t.id);if(!n){if(e.removes.find(e=>e.id===t.id))return;return this.warnNodeNotFound(e,t.id)}for(const e in t.attributes)if("string"==typeof e){const o=t.attributes[e];if(null===o)n.removeAttribute(e),"open"===e&&iu(n,t);else if("string"==typeof o)try{if("_cssText"===e&&("LINK"===n.nodeName||"STYLE"===n.nodeName))try{const e=s.getMeta(n),r=an(u(h({},e),{attributes:h(h({},e.attributes),t.attributes)}),{doc:n.ownerDocument,mirror:s,skipChild:!0,hackCss:!0,cache:this.cache});Object.assign(e.attributes,t.attributes);const o=n.nextSibling,i=n.parentNode;if(r&&i){i.removeChild(n),i.insertBefore(r,o),s.replace(t.id,r);break}}catch(e){}if("value"===e&&"TEXTAREA"===n.nodeName){const e=n;e.childNodes.forEach(t=>e.removeChild(t));const t=null==(r=n.ownerDocument)?void 0:r.createTextNode(o);t&&e.appendChild(t)}else n.setAttribute(e,o);"rr_open_mode"===e&&"DIALOG"===n.nodeName&&ou(n,t)}catch(e){this.warn("An error occurred may due to the checkout feature.",e)}else if("style"===e){const e=o,t=n;for(const s in e)if(!1===e[s])t.style.removeProperty(s);else if(e[s]instanceof Array){const r=e[s];t.style.setProperty(s,r[0],r[1])}else{const r=e[s];t.style.setProperty(s,r)}}}})}applyScroll(e,t){var s,r;const n=this.mirror.getNode(e.id);if(!n)return this.debugNodeNotFound(e,e.id);const o=this.mirror.getMeta(n);if(n===this.iframe.contentDocument)null==(s=this.iframe.contentWindow)||s.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((null==o?void 0:o.type)===_c.Document)null==(r=n.defaultView)||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{n.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(e){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}}applySelection(e){try{const t=new Set,s=e.ranges.map(({start:e,startOffset:s,end:r,endOffset:n})=>{const o=this.mirror.getNode(e),i=this.mirror.getNode(r);if(!o||!i)return;const a=new Range;a.setStart(o,s),a.setEnd(i,n);const l=o.ownerDocument,c=null==l?void 0:l.getSelection();return c&&t.add(c),{range:a,selection:c}});t.forEach(e=>e.removeAllRanges()),s.forEach(e=>{var t;return e&&(null==(t=e.selection)?void 0:t.addRange(e.range))})}catch(e){}}applyStyleSheetMutation(e){var t;let s=null;e.styleId?s=this.styleMirror.getStyle(e.styleId):e.id&&(s=(null==(t=this.mirror.getNode(e.id))?void 0:t.sheet)||null),s&&(e.source===Ac.StyleSheetRule?this.applyStyleSheetRule(e,s):e.source===Ac.StyleDeclaration&&this.applyStyleDeclaration(e,s))}applyStyleSheetRule(e,t){var s,r,n,o;if(null==(s=e.adds)||s.forEach(({rule:e,index:s})=>{try{if(Array.isArray(s)){const{positions:r,index:n}=Cc(s);Sc(t.cssRules,r).insertRule(e,n)}else{const r=void 0===s?void 0:Math.min(s,t.cssRules.length);null==t||t.insertRule(e,r)}}catch(e){}}),null==(r=e.removes)||r.forEach(({index:e})=>{try{if(Array.isArray(e)){const{positions:s,index:r}=Cc(e);Sc(t.cssRules,s).deleteRule(r||0)}else null==t||t.deleteRule(e)}catch(e){}}),e.replace)try{null==(n=t.replace)||n.call(t,e.replace)}catch(e){}if(e.replaceSync)try{null==(o=t.replaceSync)||o.call(t,e.replaceSync)}catch(e){}}applyStyleDeclaration(e,t){if(e.set){Sc(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority)}if(e.remove){Sc(t.rules,e.index).style.removeProperty(e.remove.property)}}applyAdoptedStyleSheet(e){var t;const s=this.mirror.getNode(e.id);if(!s)return;null==(t=e.styles)||t.forEach(e=>{var t;let r=null,n=null;if(vc(s)?n=(null==(t=s.ownerDocument)?void 0:t.defaultView)||null:"#document"===s.nodeName&&(n=s.defaultView),n)try{r=new n.CSSStyleSheet,this.styleMirror.add(r,e.styleId),this.applyStyleSheetRule({source:Ac.StyleSheetRule,adds:e.rules},r)}catch(e){}});let r=0;const n=(e,t)=>{const s=t.map(e=>this.styleMirror.getStyle(e)).filter(e=>null!==e);vc(e)?e.shadowRoot.adoptedStyleSheets=s:"#document"===e.nodeName&&(e.adoptedStyleSheets=s),s.length!==t.length&&r<10&&(setTimeout(()=>n(e,t),0+100*r),r++)};n(s,e.styleIds)}legacy_resolveMissingNode(e,t,s,r){const{previousId:n,nextId:o}=r,i=n&&e[n],a=o&&e[o];if(i){const{node:r,mutation:n}=i;t.insertBefore(r,s),delete e[n.node.id],delete this.legacy_missingNodeRetryMap[n.node.id],(n.previousId||n.nextId)&&this.legacy_resolveMissingNode(e,t,r,n)}if(a){const{node:r,mutation:n}=a;t.insertBefore(r,s.nextSibling),delete e[n.node.id],delete this.legacy_missingNodeRetryMap[n.node.id],(n.previousId||n.nextId)&&this.legacy_resolveMissingNode(e,t,r,n)}}moveAndHover(e,t,s,r,n){const o=this.mirror.getNode(s);if(!o)return this.debugNodeNotFound(n,s);const i=bc(o,this.iframe),a=e*i.absoluteScale+i.x,l=t*i.absoluteScale+i.y;this.mouse.style.left=a+"px",this.mouse.style.top=l+"px",r||this.drawMouseTail({x:a,y:l}),this.hoverElements(o)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:s,strokeStyle:r,duration:n}=!0===this.config.mouseTail?lu:Object.assign({},lu,this.config.mouseTail),o=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");if(!e||!this.tailPositions.length)return;e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=s,e.lineCap=t,e.strokeStyle=r,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y);const n=(e,t,s,r)=>{const n=s-e,o=r-t;return Math.sqrt(o*o+n*n)};(t=>{e.moveTo(t[0].x,t[0].y);for(let s=1;s<t.length-2;s++){const r=(t[s].x+t[s+1].x)/2,n=(t[s].y+t[s+1].y)/2;e.quadraticCurveTo(t[s].x,t[s].y,r,n)}e.quadraticCurveTo(t[t.length-1].x,t[t.length-1].y,t[t.length-1].x,t[t.length-1].y),e.stroke()})(((e,t=50)=>{const s=Array.from(e);for(let e=0;e<s.length-1;e+=1){const r=s[e],o=s[e+1];e<s.length-2&&n(r.x,r.y,o.x,o.y)<t&&s.splice(e+1,1)}return s})(this.tailPositions,10))};this.tailPositions.push(e),o(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(t=>t!==e),o()},n/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null==(t=this.lastHoveredRootNode||this.iframe.contentDocument)||t.querySelectorAll(".\\:hover").forEach(e=>{e.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let s=e;for(;s;)s.classList&&s.classList.add(":hover"),s=s.parentElement}isUserInteraction(e){return e.type===Oc.IncrementalSnapshot&&(e.data.source>Ac.Mutation&&e.data.source<=Ac.Input)}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(Fc.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn("[replayer]",...e)}debug(...e){this.config.showDebug&&this.config.logger.log("[replayer]",...e)}},t.ReplayerEvents=Fc,t.addCustomEvent=hu,t.canvasMutation=ru,t.freezePage=uu,t.record=Ah,t.takeFullSnapshot=du,t.utils=Nc,"object"==typeof s.exports&&"object"==typeof t){s.exports=((e,t,s,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of Object.getOwnPropertyNames(t))Object.prototype.hasOwnProperty.call(e,n)||n===s||Object.defineProperty(e,n,{get:()=>t[n],enumerable:!(r=Object.getOwnPropertyDescriptor(t,n))||r.enumerable});return e})(s.exports,t)}return s.exports})}}]);